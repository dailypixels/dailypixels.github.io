<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>بارش کی آخری خوشبو</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Nastaliq+Urdu&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="urdustyle.css" />

  <style>
    body {
      font-family: 'Noto Nastaliq Urdu', serif;
      margin: 0;
      background: #fff;
    }

    /* Like + Comment Floating Buttons */
    .floating-buttons {
      position: fixed;
      bottom: 22px;
      right: 20px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 12px;
      z-index: 1000;
    }

    .float-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      background: #ffffff;
      color: #111;
      border: 1px solid #ddd;
      border-radius: 50%;
      width: 52px;
      height: 52px;
      font-size: 1.3rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
    }

    .float-btn:hover {
      transform: scale(1.1);
      background: #f5f5f5;
    }

    .float-btn.liked {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      color: white;
      box-shadow: 0 4px 12px rgba(34,197,94,0.4);
    }

    /* Like Count */
    .like-count {
      position: absolute;
      bottom: -18px;
      right: 15px;
      font-size: 0.8rem;
      color: #555;
      font-family: sans-serif;
    }

    /* Comment Popup */
    .comment-popup {
      position: fixed;
      bottom: -100%;
      left: 0;
      width: 100%;
      max-height: 85%;
      background: #fff;
      border-radius: 20px 20px 0 0;
      box-shadow: 0 -6px 20px rgba(0,0,0,0.25);
      padding: 20px;
      z-index: 2000;
      display: flex;
      flex-direction: column;
      transition: bottom 0.4s ease;
    }

    .comment-popup.active {
      bottom: 0;
    }

    .popup-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-family: sans-serif;
      font-weight: 600;
      font-size: 1.1rem;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }

    .close-popup {
      background: none;
      border: none;
      font-size: 1.4rem;
      cursor: pointer;
      color: #666;
    }

    .comments-list {
      flex: 1;
      overflow-y: auto;
      margin-top: 15px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .comment-item {
      background: #f9fafb;
      padding: 10px 14px;
      border-radius: 12px;
      font-family: sans-serif;
      font-size: 0.95rem;
      line-height: 1.4;
      border: 1px solid #eee;
    }

    .comment-item strong {
      display: block;
      margin-bottom: 4px;
      color: #111;
      font-size: 0.95rem;
    }

    .comment-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      border-top: 1px solid #eee;
      padding-top: 10px;
      margin-top: 12px;
    }

    .comment-form input,
    .comment-form textarea {
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 10px;
      font-family: sans-serif;
      font-size: 0.95rem;
      width: 100%;
      resize: none;
      outline: none;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .comment-form input:focus,
    .comment-form textarea:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37,99,235,0.15);
    }

    .comment-form button {
      align-self: flex-start;
      background: linear-gradient(90deg, #2563eb, #1d4ed8);
      color: white;
      border: none;
      border-radius: 40px;
      padding: 8px 22px;
      cursor: pointer;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(37,99,235,0.3);
    }

    .comment-form button:hover {
      transform: scale(1.05);
    }

    .comment-form button.sent {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      box-shadow: 0 4px 10px rgba(34,197,94,0.4);
      cursor: default;
      transform: none;
    }

    /* Scrollbar */
    .comments-list::-webkit-scrollbar {
      width: 6px;
    }
    .comments-list::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 4px;
    }

    /* Responsive */
    @media (max-width: 600px) {
      .float-btn {
        width: 48px;
        height: 48px;
        font-size: 1.2rem;
      }
      .comment-popup {
        padding: 16px;
      }
    }
  </style>
</head>
<body>

  <!-- Back to Urdu Stories -->
  <a class="back-link" href="index.html">← تمام اردو کہانیاں</a>

  <article class="story-container">
    <header class="story-header">
      <h1 class="story-title">بارش کی آخری خوشبو</h1>
      <p class="story-meta">28 اکتوبر 2025 • تحریر: سائرہ نعیم</p>
      <div class="story-tags"><span>جدائی</span><span>خوشبو</span><span>انتظار</span></div>
      <img class="urdu-featured-image" src="https://plus.unsplash.com/premium_photo-1670002312696-9e8b452cdcc9?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8QSUyMHJvYWQlMjB3ZXQlMjBhZnRlciUyMHRoZSUyMHJhaW4lMkMlMjB0aGUlMjBzY2VudCUyMG9mJTIwZWFydGglMjBpbiUyMHRoZSUyMGFpciUyQyUyMGFuZCUyMGElMjBnaXJsJTIwd2hvJTIwaXMlMjBsb29raW5nJTIwYXQlMjB0aGUlMjBza3klMjB3aXRoJTIwaGVyJTIwdW1icmVsbGElMjBjbG9zZWQufGVufDB8fDB8fHww&auto=format&fit=crop&q=60&w=500" alt="بارش کے بعد بھیگی سڑک، ہوا میں مٹی کی خوشبو،
اور ایک لڑکی جو چھتری بند کیے آسمان کو دیکھ رہی ہے۔" loading="eager" />
    </header>

    <main class="story-content">
        <p> شہر میں پہلی بارش ہو رہی تھی۔ سڑکوں پر بوندیں رقص کر رہی تھیں، اور درختوں کے پتوں سے پانی ٹپک رہا تھا۔ <strong>زُہرا</strong> کھڑکی کے پاس کھڑی تھی، ہاتھ میں ایک چائے کا کپ، اور دل میں ایک پرانی یاد۔ </p> <p> یہ وہی خوشبو تھی — مٹی، ہوا، اور بارش کا وہ ملاپ جو اسے ہمیشہ **حسام** کی یاد دلاتا تھا۔ پانچ سال گزر گئے تھے مگر ہر بارش کے ساتھ وہی لمس، وہی مسکراہٹ لوٹ آتی تھی۔ </p> <p> وہ یادوں کے بادل میں گم ہو گئی۔ ایک وقت تھا جب وہ اور حسام بارش میں بنا چھتری کے چلتے تھے۔ حسام کہتا، “چھتری خوشبو روک دیتی ہے، زُہرا — بارش کو مکمل محسوس کرو، ورنہ یاد آدھی رہ جاتی ہے۔” </p> <p> زہرا نے آج چھتری نہیں کھولی۔ وہ سڑک پر نکل آئی، قدم آہستہ آہستہ بھیگتی مٹی پر پڑ رہے تھے۔ بارش کی بوندیں اس کے چہرے پر پھسلتی گئیں، جیسے وقت اپنی کہانی دہرا رہا ہو۔ </p> <p> ایک لمحے کو لگا جیسے حسام قریب ہو۔ ہوا کے جھونکے کے ساتھ وہی آواز، وہی قہقہہ — “تم اب بھی بارش سے ڈرتی ہو؟” زہرا کے ہونٹ لرز گئے، اس نے سر گھمایا — کسی کا سایہ نہیں تھا۔ </p> <p> وہ ہنس دی۔ پھر رونے لگی۔ دونوں احساس ایک ساتھ جیسے برسنے لگے۔ چائے کا کپ ہاتھ سے چھوٹ گیا، اور مٹی کی خوشبو اور بھی گہری ہو گئی۔ </p> <p> رات تک بارش تھم گئی۔ زہرا نے ڈائری کھولی اور لکھا — “کچھ لوگ بارش کی طرح ہوتے ہیں، آتے ہیں، دل بھیگ جاتا ہے، اور جب جاتے ہیں تو صرف خوشبو رہ جاتی ہے — جو برسوں نہیں جاتی۔” </p> <p> اگلی صبح سورج نکلا۔ کھڑکی کے پاس کپ ابھی بھی رکھا تھا، اور کپ کے کنارے پر ایک چھوٹی سی بوند ٹکی ہوئی تھی — جیسے کسی نے وعدہ کیا ہو کہ وہ پھر لوٹے گا۔ </p> <p> <strong>مفہوم / عکاسی:</strong><br> “بارش کی آخری خوشبو” ایک احساساتی افسانہ ہے جو یاد، وقت، اور خاموش محبت کی گہرائی بیان کرتا ہے۔ یہ دکھاتا ہے کہ کچھ رشتے ختم نہیں ہوتے — وہ موسم بن کر رہ جاتے ہیں۔ ان کی خوشبو، ان کی یاد، اور ان کی خاموشی ہر بار بارش کے ساتھ دل میں دوبارہ جنم لیتی ہے۔ ☔ </p>
      <p class="end-note">— اختتام —</p>
    </main>

    <div class="story-nav">
      <a href="urdustory114.html" class="nav-button">← پچھلی کہانی</a>
      <a href="" class="nav-button">اختتام</a>
    </div>
  </article>

  <!-- Floating Like + Comment Buttons -->
  <div class="floating-buttons">
    <div style="position: relative;">
      <button class="float-btn" id="likeBtn">❤️</button>
      <span class="like-count" id="likeCount">0</span>
    </div>
    <button class="float-btn" id="commentBtn">💬</button>
  </div>

  <!-- Comment Popup -->
  <div class="comment-popup" id="commentPopup">
    <div class="popup-header">
      <span>Comments</span>
      <button class="close-popup" id="closePopup">✕</button>
    </div>

    <div class="comments-list" id="commentsList"></div>

    <form class="comment-form" action="https://formspree.io/f/your-form-id" method="POST" id="commentForm">
      <input type="text" id="name" name="name" placeholder="Your name" required />
      <textarea id="comment" name="comment" placeholder="Write a comment..." required></textarea>
      <button type="submit" id="sendBtn">Send</button>
    </form>
  </div>

  <footer class="urdu-footer">
  <p>© 2025 Daily Pixel۔ جملہ حقوق محفوظ ہیں۔</p>
</footer>

  <script src="../js/storyFeatures.js"></script>

  <script>
    /* ---------------- LIKE SYSTEM ---------------- */
    const likeBtn = document.getElementById("likeBtn");
    const likeCount = document.getElementById("likeCount");

    const storyKey = location.pathname.split("/").pop();
    const likedKey = `liked_${storyKey}`;
    const countKey = `likeCount_${storyKey}`;

    let liked = localStorage.getItem(likedKey) === "true";
    let count = parseInt(localStorage.getItem(countKey));

    if (isNaN(count)) {
      count = Math.floor(15 + Math.random() * 50);
      localStorage.setItem(countKey, count);
    }

    updateLikeUI();

    likeBtn.addEventListener("click", () => {
      liked = !liked;
      count = liked ? count + 1 : Math.max(0, count - 1);
      localStorage.setItem(likedKey, liked);
      localStorage.setItem(countKey, count);
      updateLikeUI();
    });

    function updateLikeUI() {
      likeBtn.classList.toggle("liked", liked);
      likeCount.textContent = count;
    }

    /* ---------------- COMMENT POPUP ---------------- */
    const commentBtn = document.getElementById("commentBtn");
    const commentPopup = document.getElementById("commentPopup");
    const closePopup = document.getElementById("closePopup");
    const commentsList = document.getElementById("commentsList");
    const commentForm = document.getElementById("commentForm");
    const sendBtn = document.getElementById("sendBtn");

    commentBtn.addEventListener("click", () => {
      commentPopup.classList.add("active");
    });

    closePopup.addEventListener("click", () => {
      commentPopup.classList.remove("active");
    });

    /* Load saved comments */
    const commentsKey = `comments_${storyKey}`;
    let comments = JSON.parse(localStorage.getItem(commentsKey)) || [];
    renderComments();

    function renderComments() {
      commentsList.innerHTML = comments.length
        ? comments.map(c => `<div class="comment-item"><strong>${c.name}</strong>${c.text}</div>`).join("")
        : `<p style="color:#777;font-family:sans-serif;font-size:0.9rem;">No comments yet.</p>`;
    }

    /* Submit comment */
    commentForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const text = document.getElementById("comment").value.trim();
      if (!name || !text) return;

      // Save locally
      comments.push({ name, text });
      localStorage.setItem(commentsKey, JSON.stringify(comments));
      renderComments();

      // Send to Formspree
      const formData = new FormData(commentForm);
      const action = commentForm.getAttribute("action");

      try {
        const res = await fetch(action, { method: "POST", body: formData, headers: { 'Accept': 'application/json' } });
        if (res.ok) {
          sendBtn.textContent = "Sent ✅";
          sendBtn.classList.add("sent");
          sendBtn.disabled = true;
          commentForm.reset();
          setTimeout(() => {
            sendBtn.textContent = "Send";
            sendBtn.classList.remove("sent");
            sendBtn.disabled = false;
          }, 2000);
        }
      } catch {
        alert("Connection failed. Please try again.");
      }
    });
  </script>
</body>
</html>
