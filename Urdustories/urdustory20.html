<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>محل کی آخری روشنی</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Nastaliq+Urdu&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="urdustyle.css" />
</head>
<body>
  <a class="back-link" href="index.html">← تمام اردو کہانیاں</a>

  <article class="story-container">
    <header class="story-header">
      <h1 class="story-title">محل کی آخری روشنی</h1>
      <p class="story-meta">28 اکتوبر، 2025 • تحریر: ماہِرہ انصاری</p>
      <div class="story-tags">
        <span>بادشاہت</span><span>زوال</span><span>تاریخ</span>
      </div>
      <img class="urdu-featured-image" src="https://media.istockphoto.com/id/93160879/photo/country-seat.webp?a=1&b=1&s=612x612&w=0&k=20&c=7fUrucmX1ibtuo5gGCC5Id7D0GxORdD4WBBymXtiGeI=" alt="ایک پرانا محل، جس کی دیواروں پر شام کی آخری روشنی پڑ رہی ہو — جیسے ماضی الوداع کہہ رہا ہو۔" />
    </header>

    <main class="story-content">
      <p>
  شام ڈھل چکی تھی۔  
  دلی کے پرانے محل میں آخری چراغ جل رہا تھا۔  
  فضا میں عود کی خوشبو اور ویرانی دونوں گھل چکی تھیں۔  
  صدیوں پرانا فرش وقت کے بوجھ سے تھک چکا تھا۔  
  اور محل کی دیواریں جیسے خود اپنی تاریخ سن رہی تھیں۔  
</p>

<p>
  بادشاہ عالمگیر ثانی کی تصویر ابھی تک دیوار پر لٹکی تھی،  
  مگر آنکھوں سے روشنی رخصت ہو چکی تھی۔  
  محل کے نگراں، *میر فصیح الدین*،  
  اب بھی ہر رات چراغ روشن کرتے —  
  گویا تاریخ کے جنازے پر دیا جلانا ان کا فرض ہو۔  
</p>

<p>
  ایک رات، جب ہوا میں خزاں کا پہلا جھونکا آیا،  
  انہوں نے آسمان کی طرف دیکھا اور کہا:  
  “وقت نے سب کچھ لے لیا —  
  مگر یہ دیواریں اب بھی وفادار ہیں۔”  
</p>

<p>
  اسی لمحے ایک آواز آئی —  
  “وفاداری دیواروں کی نہیں، انسانوں کی ہونی چاہیے تھی۔”  
  میر فصیح چونکے۔  
  سامنے ایک نوجوان کھڑا تھا —  
  شاید کوئی مورخ، جو تاریخ لکھنے آیا تھا۔  
</p>

<p>
  “تم کون ہو؟”  
  “میں وہ ہوں جو آنے والے وقت کے لیے تمہارا قصہ لکھنے آیا ہے۔  
  بتاؤ، زوال کی سب سے پہلی علامت کیا تھی؟”  
  میر فصیح نے چراغ بجھایا،  
  اور جواب دیا: “جب لفظ تاج سے اونچا ہونے لگے،  
  اور انسان اپنی زمین سے شرمندہ ہو گیا۔”  
</p>

<p>
  باہر گرج کی آواز آئی۔  
  آسمان پر بجلی چمکی —  
  محل کے ایک ستون میں دراڑ پڑ گئی۔  
  اور فصیح نے آخری بار چراغ جلایا۔  
  “یہ آخری روشنی ہے،” انہوں نے کہا،  
  “اس کے بعد تاریخ خود اپنی آنکھیں بند کر لے گی۔”  
</p>

<p>
  جب مورخ نے پلٹ کر دیکھا،  
  فصیح غائب تھا۔  
  صرف چراغ جل رہا تھا،  
  اور اس کی لو میں دیواروں پر پرانے الفاظ لرز رہے تھے:  
  <em>“تاریخ زندہ رہتی ہے — مگر انسان نہیں۔”</em>  
</p>

<p>
  <strong>مفہوم / عکاسی:</strong><br>
  “محل کی آخری روشنی” ہمیں یاد دلاتی ہے کہ زوال صرف سلطنتوں کا نہیں ہوتا —  
  کرداروں، سچائیوں، اور یادوں کا بھی ہوتا ہے۔  
  جب ہم اپنے ماضی سے نظریں چراتے ہیں،  
  تاریخ خاموشی سے چراغ بجھا دیتی ہے۔  
</p>

      <p class="end-note">— اختتام —</p>
        <style>
    body {
      font-family: 'Noto Nastaliq Urdu', serif;
      margin: 0;
      background: #fff;
    }

    /* Like + Comment Floating Buttons */
    .floating-buttons {
      position: fixed;
      bottom: 22px;
      right: 20px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 12px;
      z-index: 1000;
    }

    .float-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      background: #ffffff;
      color: #111;
      border: 1px solid #ddd;
      border-radius: 50%;
      width: 52px;
      height: 52px;
      font-size: 1.3rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
    }

    .float-btn:hover {
      transform: scale(1.1);
      background: #f5f5f5;
    }

    .float-btn.liked {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      color: white;
      box-shadow: 0 4px 12px rgba(34,197,94,0.4);
    }

    /* Like Count */
    .like-count {
      position: absolute;
      bottom: -18px;
      right: 15px;
      font-size: 0.8rem;
      color: #555;
      font-family: sans-serif;
    }

    /* Comment Popup */
    .comment-popup {
      position: fixed;
      bottom: -100%;
      left: 0;
      width: 100%;
      max-height: 85%;
      background: #fff;
      border-radius: 20px 20px 0 0;
      box-shadow: 0 -6px 20px rgba(0,0,0,0.25);
      padding: 20px;
      z-index: 2000;
      display: flex;
      flex-direction: column;
      transition: bottom 0.4s ease;
    }

    .comment-popup.active {
      bottom: 0;
    }

    .popup-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-family: sans-serif;
      font-weight: 600;
      font-size: 1.1rem;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }

    .close-popup {
      background: none;
      border: none;
      font-size: 1.4rem;
      cursor: pointer;
      color: #666;
    }

    .comments-list {
      flex: 1;
      overflow-y: auto;
      margin-top: 15px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .comment-item {
      background: #f9fafb;
      padding: 10px 14px;
      border-radius: 12px;
      font-family: sans-serif;
      font-size: 0.95rem;
      line-height: 1.4;
      border: 1px solid #eee;
    }

    .comment-item strong {
      display: block;
      margin-bottom: 4px;
      color: #111;
      font-size: 0.95rem;
    }

    .comment-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      border-top: 1px solid #eee;
      padding-top: 10px;
      margin-top: 12px;
    }

    .comment-form input,
    .comment-form textarea {
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 10px;
      font-family: sans-serif;
      font-size: 0.95rem;
      width: 100%;
      resize: none;
      outline: none;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .comment-form input:focus,
    .comment-form textarea:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37,99,235,0.15);
    }

    .comment-form button {
      align-self: flex-start;
      background: linear-gradient(90deg, #2563eb, #1d4ed8);
      color: white;
      border: none;
      border-radius: 40px;
      padding: 8px 22px;
      cursor: pointer;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(37,99,235,0.3);
    }

    .comment-form button:hover {
      transform: scale(1.05);
    }

    .comment-form button.sent {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      box-shadow: 0 4px 10px rgba(34,197,94,0.4);
      cursor: default;
      transform: none;
    }

    /* Scrollbar */
    .comments-list::-webkit-scrollbar {
      width: 6px;
    }
    .comments-list::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 4px;
    }

    /* Responsive */
    @media (max-width: 600px) {
      .float-btn {
        width: 48px;
        height: 48px;
        font-size: 1.2rem;
      }
      .comment-popup {
        padding: 16px;
      }
    }
  </style>
<!-- Floating Like + Comment Buttons -->
  <div class="floating-buttons">
    <div style="position: relative;">
      <button class="float-btn" id="likeBtn">❤️</button>
      <span class="like-count" id="likeCount">0</span>
    </div>
    <button class="float-btn" id="commentBtn">💬</button>
  </div>

  <!-- Comment Popup -->
  <div class="comment-popup" id="commentPopup">
    <div class="popup-header">
      <span>Comments</span>
      <button class="close-popup" id="closePopup">✕</button>
    </div>

    <div class="comments-list" id="commentsList"></div>

    <form class="comment-form" action="https://formspree.io/f/xkgvkele" method="POST" id="commentForm">
      <input type="text" id="name" name="name" placeholder="Your name" required />
      <textarea id="comment" name="comment" placeholder="Write a comment..." required></textarea>
      <button type="submit" id="sendBtn">Send</button>
    </form>
  </div>

<script>
    /* ---------------- LIKE SYSTEM ---------------- */
    const likeBtn = document.getElementById("likeBtn");
    const likeCount = document.getElementById("likeCount");

    const storyKey = location.pathname.split("/").pop();
    const likedKey = `liked_${storyKey}`;
    const countKey = `likeCount_${storyKey}`;

    let liked = localStorage.getItem(likedKey) === "true";
    let count = parseInt(localStorage.getItem(countKey));

    if (isNaN(count)) {
      count = Math.floor(15 + Math.random() * 50);
      localStorage.setItem(countKey, count);
    }

    updateLikeUI();

    likeBtn.addEventListener("click", () => {
      liked = !liked;
      count = liked ? count + 1 : Math.max(0, count - 1);
      localStorage.setItem(likedKey, liked);
      localStorage.setItem(countKey, count);
      updateLikeUI();
    });

    function updateLikeUI() {
      likeBtn.classList.toggle("liked", liked);
      likeCount.textContent = count;
    }

    /* ---------------- COMMENT POPUP ---------------- */
    const commentBtn = document.getElementById("commentBtn");
    const commentPopup = document.getElementById("commentPopup");
    const closePopup = document.getElementById("closePopup");
    const commentsList = document.getElementById("commentsList");
    const commentForm = document.getElementById("commentForm");
    const sendBtn = document.getElementById("sendBtn");

    commentBtn.addEventListener("click", () => {
      commentPopup.classList.add("active");
    });

    closePopup.addEventListener("click", () => {
      commentPopup.classList.remove("active");
    });

    /* Load saved comments */
    const commentsKey = `comments_${storyKey}`;
    let comments = JSON.parse(localStorage.getItem(commentsKey)) || [];
    renderComments();

    function renderComments() {
      commentsList.innerHTML = comments.length
        ? comments.map(c => `<div class="comment-item"><strong>${c.name}</strong>${c.text}</div>`).join("")
        : `<p style="color:#777;font-family:sans-serif;font-size:0.9rem;">No comments yet.</p>`;
    }

    /* Submit comment */
    commentForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const text = document.getElementById("comment").value.trim();
      if (!name || !text) return;

      // Save locally
      comments.push({ name, text });
      localStorage.setItem(commentsKey, JSON.stringify(comments));
      renderComments();

      // Send to Formspree
      const formData = new FormData(commentForm);
      const action = commentForm.getAttribute("action");

      try {
        const res = await fetch(action, { method: "POST", body: formData, headers: { 'Accept': 'application/json' } });
        if (res.ok) {
          sendBtn.textContent = "Sent ✅";
          sendBtn.classList.add("sent");
          sendBtn.disabled = true;
          commentForm.reset();
          setTimeout(() => {
            sendBtn.textContent = "Send";
            sendBtn.classList.remove("sent");
            sendBtn.disabled = false;
          }, 2000);
        }
      } catch {
        alert("Connection failed. Please try again.");
      }
    });
  </script>



    </main>

    <nav class="story-nav">
      <a class="nav-button" href="urdustory19.html">← پچھلی کہانی</a>
      <a class="nav-button" href="urdustory21.html">اگلی کہانی →</a>
    </nav>
  </article>
  <script src="../scripts/menu.js"></script>
<script src="../js/storyFeatures.js"></script>

<footer class="urdu-footer">
  <p>© 2025 Daily Pixel۔ جملہ حقوق محفوظ ہیں۔</p>
</footer>

</body>
</html>
