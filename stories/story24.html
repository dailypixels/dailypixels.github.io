<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Last Song of Autumn</title>
  <link rel="stylesheet" href="../style.css" />
</head>
<body>
  <a class="back-link" href="../index.html">‚Üê Back to Stories</a>
  <article class="story-page">
    <header class="story-header">
      <h1>The Last Song of Autumn</h1>
      <p class="meta">May 2, 2025 ‚Ä¢ By Aria Leighton</p>
      <div class="tags">
        <span class="tag">love</span>
        <span class="tag">loss</span>
        <span class="tag">autumn</span>
      </div>
      <img 
        class="featured-image" 
        src="https://media.istockphoto.com/id/1035763968/photo/violin-in-autumnal-park.webp?a=1&b=1&s=612x612&w=0&k=20&c=G2ahpnmH9LWVqDQMGYC-k3zdE09qSnub_wWtPEPwVJE=" 
        alt="A quiet park covered in amber leaves ‚Äî a lone violin rests on a wooden bench, strings trembling in the wind like something still waiting to be played.">
    </header>

    <main class="story-content">
     <p> The first time she heard him play, it was autumn. <br><br> The air smelled of rain and rusted leaves, and the park was half-empty except for a man with a violin beneath the oak tree. His music wasn‚Äôt flawless ‚Äî a few trembling notes, a missed rhythm ‚Äî yet something in it carried warmth, like a whisper from a life she hadn‚Äôt lived yet. <br> She stayed until his song ended. Then she clapped, softly. He looked up, surprised, as if applause was a language he had forgotten. <br> ‚ÄúDo you always play alone?‚Äù she asked. <br> ‚ÄúOnly until someone listens,‚Äù he said. </p> <p> Her name was <em>Elara</em>. His was <em>Jonas</em>. And from that day, the park became their meeting place ‚Äî every Sunday, at the same hour, beneath the same tree. He would play; she would listen. Sometimes she‚Äôd hum along, and the melody would catch the light between them like dust caught in sunlight. <br> They never said what they were to each other ‚Äî not love, not friendship, just something that didn‚Äôt need naming. </p> <p> One evening, as twilight crept through the branches, he said quietly, ‚ÄúI‚Äôm writing something new ‚Äî for you. The last song of autumn.‚Äù <br> She smiled. ‚ÄúThen don‚Äôt finish it too soon.‚Äù <br> He laughed, but his eyes didn‚Äôt. ‚ÄúI‚Äôll try.‚Äù </p> <p> Weeks passed. The leaves turned gold, then brown. Each time they met, his playing grew slower ‚Äî softer ‚Äî as though each note was a heartbeat running out of time. <br> She noticed his hands trembling, his breath short, but she didn‚Äôt ask. Some silences, she knew, were too fragile to break. </p> <p> One Sunday, he didn‚Äôt come. <br> The bench was empty. The violin case was gone. Only the wind played through the oak leaves, making them sound like strings. She waited until the streetlights blinked on, until the cold crept through her coat, until it felt like waiting itself had become a kind of prayer. </p> <p> Two days later, she received a small envelope with no return address. Inside was a folded sheet of music ‚Äî unfinished, with the final line missing. And beneath the notes, a message in his handwriting: <br> <em>‚ÄúIf I can‚Äôt play it for you, promise me you‚Äôll listen to the wind. It knows the ending.‚Äù</em> </p> <p> That winter, she went back to the park alone. Snow covered the benches, the trees bare and skeletal. She sat beneath the same oak, humming his song softly ‚Äî the one without an ending. <br> And just as her voice began to fade, a gust of wind swept through the branches, carrying a low, trembling hum that completed the melody. <br> She closed her eyes, tears freezing against her cheeks. He had kept his promise ‚Äî one last song before the leaves fell. </p> <p> Every year after, when autumn returned, so did she. She‚Äôd sit beneath the oak tree, humming that song. And sometimes, when the light was right and the wind came from the east, the air would echo faintly ‚Äî as if another violin was answering. </p>
<p> <strong>Meaning / Reflection:</strong><br> *The Last Song of Autumn* is about love that doesn‚Äôt vanish ‚Äî it transforms. Some stories don‚Äôt end when someone leaves; they linger in the spaces between sound and silence. True love, like music, never dies ‚Äî it just changes instruments. üéªüçÇ </p>

      <p class="end-note">‚Äî End of Story ‚Äî</p>
    </main>

    <nav class="story-navigation">
      <a href="story23.html" class="nav-button prev">‚Üê Previous Story</a>
      <a href="story25.html" class="nav-button next">Next Story ‚Üí</a>
    </nav>
  </article>
  <style>
    body {
      font-family: 'Noto Nastaliq Urdu', serif;
      margin: 0;
      background: #fff;
    }

    /* Like + Comment Floating Buttons */
    .floating-buttons {
      position: fixed;
      bottom: 22px;
      right: 20px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 12px;
      z-index: 1000;
    }

    .float-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      background: #ffffff;
      color: #111;
      border: 1px solid #ddd;
      border-radius: 50%;
      width: 52px;
      height: 52px;
      font-size: 1.3rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
    }

    .float-btn:hover {
      transform: scale(1.1);
      background: #f5f5f5;
    }

    .float-btn.liked {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      color: white;
      box-shadow: 0 4px 12px rgba(34,197,94,0.4);
    }

    /* Like Count */
    .like-count {
      position: absolute;
      bottom: -18px;
      right: 15px;
      font-size: 0.8rem;
      color: #555;
      font-family: sans-serif;
    }

    /* Comment Popup */
    .comment-popup {
      position: fixed;
      bottom: -100%;
      left: 0;
      width: 100%;
      max-height: 85%;
      background: #fff;
      border-radius: 20px 20px 0 0;
      box-shadow: 0 -6px 20px rgba(0,0,0,0.25);
      padding: 20px;
      z-index: 2000;
      display: flex;
      flex-direction: column;
      transition: bottom 0.4s ease;
    }

    .comment-popup.active {
      bottom: 0;
    }

    .popup-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-family: sans-serif;
      font-weight: 600;
      font-size: 1.1rem;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }

    .close-popup {
      background: none;
      border: none;
      font-size: 1.4rem;
      cursor: pointer;
      color: #666;
    }

    .comments-list {
      flex: 1;
      overflow-y: auto;
      margin-top: 15px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .comment-item {
      background: #f9fafb;
      padding: 10px 14px;
      border-radius: 12px;
      font-family: sans-serif;
      font-size: 0.95rem;
      line-height: 1.4;
      border: 1px solid #eee;
    }

    .comment-item strong {
      display: block;
      margin-bottom: 4px;
      color: #111;
      font-size: 0.95rem;
    }

    .comment-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      border-top: 1px solid #eee;
      padding-top: 10px;
      margin-top: 12px;
    }

    .comment-form input,
    .comment-form textarea {
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 10px;
      font-family: sans-serif;
      font-size: 0.95rem;
      width: 100%;
      resize: none;
      outline: none;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .comment-form input:focus,
    .comment-form textarea:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37,99,235,0.15);
    }

    .comment-form button {
      align-self: flex-start;
      background: linear-gradient(90deg, #2563eb, #1d4ed8);
      color: white;
      border: none;
      border-radius: 40px;
      padding: 8px 22px;
      cursor: pointer;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(37,99,235,0.3);
    }

    .comment-form button:hover {
      transform: scale(1.05);
    }

    .comment-form button.sent {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      box-shadow: 0 4px 10px rgba(34,197,94,0.4);
      cursor: default;
      transform: none;
    }

    /* Scrollbar */
    .comments-list::-webkit-scrollbar {
      width: 6px;
    }
    .comments-list::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 4px;
    }

    /* Responsive */
    @media (max-width: 600px) {
      .float-btn {
        width: 48px;
        height: 48px;
        font-size: 1.2rem;
      }
      .comment-popup {
        padding: 16px;
      }
    }
  </style>
<!-- Floating Like + Comment Buttons -->
  <div class="floating-buttons">
    <div style="position: relative;">
      <button class="float-btn" id="likeBtn">‚ù§Ô∏è</button>
      <span class="like-count" id="likeCount">0</span>
    </div>
    <button class="float-btn" id="commentBtn">üí¨</button>
  </div>

  <!-- Comment Popup -->
  <div class="comment-popup" id="commentPopup">
    <div class="popup-header">
      <span>Comments</span>
      <button class="close-popup" id="closePopup">‚úï</button>
    </div>

    <div class="comments-list" id="commentsList"></div>

    <form class="comment-form" action="https://formspree.io/f/xkgvkele" method="POST" id="commentForm">
      <input type="text" id="name" name="name" placeholder="Your name" required />
      <textarea id="comment" name="comment" placeholder="Write a comment..." required></textarea>
      <button type="submit" id="sendBtn">Send</button>
    </form>
  </div>

<script>
    /* ---------------- LIKE SYSTEM ---------------- */
    const likeBtn = document.getElementById("likeBtn");
    const likeCount = document.getElementById("likeCount");

    const storyKey = location.pathname.split("/").pop();
    const likedKey = `liked_${storyKey}`;
    const countKey = `likeCount_${storyKey}`;

    let liked = localStorage.getItem(likedKey) === "true";
    let count = parseInt(localStorage.getItem(countKey));

    if (isNaN(count)) {
      count = Math.floor(15 + Math.random() * 50);
      localStorage.setItem(countKey, count);
    }

    updateLikeUI();

    likeBtn.addEventListener("click", () => {
      liked = !liked;
      count = liked ? count + 1 : Math.max(0, count - 1);
      localStorage.setItem(likedKey, liked);
      localStorage.setItem(countKey, count);
      updateLikeUI();
    });

    function updateLikeUI() {
      likeBtn.classList.toggle("liked", liked);
      likeCount.textContent = count;
    }

    /* ---------------- COMMENT POPUP ---------------- */
    const commentBtn = document.getElementById("commentBtn");
    const commentPopup = document.getElementById("commentPopup");
    const closePopup = document.getElementById("closePopup");
    const commentsList = document.getElementById("commentsList");
    const commentForm = document.getElementById("commentForm");
    const sendBtn = document.getElementById("sendBtn");

    commentBtn.addEventListener("click", () => {
      commentPopup.classList.add("active");
    });

    closePopup.addEventListener("click", () => {
      commentPopup.classList.remove("active");
    });

    /* Load saved comments */
    const commentsKey = `comments_${storyKey}`;
    let comments = JSON.parse(localStorage.getItem(commentsKey)) || [];
    renderComments();

    function renderComments() {
      commentsList.innerHTML = comments.length
        ? comments.map(c => `<div class="comment-item"><strong>${c.name}</strong>${c.text}</div>`).join("")
        : `<p style="color:#777;font-family:sans-serif;font-size:0.9rem;">No comments yet.</p>`;
    }

    /* Submit comment */
    commentForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const text = document.getElementById("comment").value.trim();
      if (!name || !text) return;

      // Save locally
      comments.push({ name, text });
      localStorage.setItem(commentsKey, JSON.stringify(comments));
      renderComments();

      // Send to Formspree
      const formData = new FormData(commentForm);
      const action = commentForm.getAttribute("action");

      try {
        const res = await fetch(action, { method: "POST", body: formData, headers: { 'Accept': 'application/json' } });
        if (res.ok) {
          sendBtn.textContent = "Sent ‚úÖ";
          sendBtn.classList.add("sent");
          sendBtn.disabled = true;
          commentForm.reset();
          setTimeout(() => {
            sendBtn.textContent = "Send";
            sendBtn.classList.remove("sent");
            sendBtn.disabled = false;
          }, 2000);
        }
      } catch {
        alert("Connection failed. Please try again.");
      }
    });
  </script>
<script src="../js/storyFeatures.js"></script>

<footer class="site-footer">
  <p>¬© <span id="year"></span> Daily Pixel. All rights reserved.</p>
</footer>

</body>
</html>
