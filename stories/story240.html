<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Window in Room 312</title>
  <link rel="stylesheet" href="../style.css" />
</head>
<body>
  <a class="back-link" href="../index.html">â† Back to Stories</a>
  <article class="story-page">
    <header class="story-header">
      <h1>The Window in Room 312</h1>
      <p class="meta">September 9, 2025 â€¢ By Rowan Price</p>
      <div class="tags">
        <span class="tag">healing</span>
        <span class="tag">hope</span>
        <span class="tag">self-discovery</span>
      </div>
      <img class="featured-image" src="https://media.istockphoto.com/id/1071760354/photo/close-up-walking-aids-walking-aids-exporter-near-the-windows-on-sunrise-with-the-building.webp?a=1&b=1&s=612x612&w=0&k=20&c=_hprsm8-3V9AOvpsgVGxd3Q-nEyZOexIhq0pOwZPaw8=" alt="A hospital window glowing with sunrise light, overlooking a quiet city skyline.">
    </header>

    <main class="story-content">
      <p>When Emily Carter woke up, she didnâ€™t remember her name. The room around her was white and humming softly, a steady beeping echoing in the air. On the wall â€” a clock ticking past dawn. On her wrist â€” a thin hospital band with one word written: â€œEmily.â€</p>

<p>Room 312 had no decorations, no photos, no flowers. Just a narrow bed and a small square window facing east. Through it, she could see the first light of morning spilling over the city skyline.</p>

<p>â€œGood morning, sweetheart,â€ said a nurse entering quietly. â€œYouâ€™ve been out for a few days. How are you feeling?â€</p>

<p>Emilyâ€™s voice was hoarse. â€œWhere am I?â€</p>

<p>â€œMercy General,â€ the nurse replied gently. â€œYou were found unconscious after an accident. They said you were hit by a car near Riverside Avenue.â€</p>

<p>Emily frowned. â€œDo you know who I am?â€</p>

<p>The nurse hesitated. â€œNo ID. No phone. But maybe thatâ€™s something youâ€™ll remember soon.â€</p>

<hr>

<p>Days turned into weeks. Emilyâ€™s memory remained blank, but she found comfort in the sunrise through that tiny window. Every morning, she would sit by it, watching the light shift from pale gold to amber, spreading warmth across the sterile walls.</p>

<p>â€œThat windowâ€™s my favorite patient,â€ said Mr. Anders, the old man in the room across the hall, who came by often with his IV stand. â€œIt reminds me thereâ€™s something beyond these walls.â€</p>

<p>Emily smiled faintly. â€œItâ€™s strange. I donâ€™t know who I was before this, butâ€¦ I donâ€™t feel empty when I watch it.â€</p>

<p>â€œMaybe youâ€™re not supposed to remember the pain,â€ Anders said. â€œMaybe youâ€™re supposed to start new.â€</p>

<p>That night, she couldnâ€™t sleep. She stared at her reflection in the windowpane â€” a face both familiar and foreign. â€œWho were you?â€ she whispered to herself. â€œAnd who are you now?â€</p>

<hr>

<p>One morning, a new nurse came in carrying an envelope. â€œThis was found in your jacket,â€ she said. â€œIt got misplaced during intake.â€</p>

<p>Emily opened it carefully. Inside was a single photograph: a little girl holding a kite, laughing on a beach. On the back, written in smudged ink â€” <em>Keep chasing the sky.</em></p>

<p>And suddenly, flashes came. The smell of the ocean. Her motherâ€™s laughter. The feeling of wind pulling against the string of a kite. The voice saying, â€œNo matter what happens, always look up.â€</p>

<p>Emily pressed the photo to her chest and began to cry â€” not from sadness, but from recognition. She didnâ€™t remember everything, but she remembered who she wanted to be: someone who still chased the sky.</p>

<hr>

<p>When she was finally discharged, Emily went to the beach from the photo. The sky was wide and blue, waves curling like gentle breaths. She lifted a small kite sheâ€™d bought from a street vendor and let the wind take it. It soared higher and higher until it became a dot against the sun.</p>

<p>She closed her eyes, feeling the pull of the string in her hand â€” a quiet, living connection between what was and what will be.</p>

<p>For the first time, Emily wasnâ€™t afraid of forgetting. She had found something better than memory â€” direction.</p>

<hr>

<p><strong>Meaning / Reflection:</strong><br>
<em>The Window in Room 312</em> reminds us that healing doesnâ€™t always mean remembering what was lost â€” sometimes it means learning to see beauty again, even through a small window. Life may confine us, but hope always finds a way to shine through the glass. ğŸŒ…âœ¨</p>

      <p class="end-note">â€” End of Story â€”</p>
    </main>

    <nav class="story-navigation">
      <a href="story239.html" class="nav-button prev">â† Previous Story</a>
      <a href="story241.html" class="nav-button next">Next Story â†’</a>
    </nav>
  </article>
<script src="../js/storyFeatures.js"></script>
<style>
    body {
      font-family: 'Noto Nastaliq Urdu', serif;
      margin: 0;
      background: #fff;
    }

    /* Like + Comment Floating Buttons */
    .floating-buttons {
      position: fixed;
      bottom: 22px;
      right: 20px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 12px;
      z-index: 1000;
    }

    .float-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      background: #ffffff;
      color: #111;
      border: 1px solid #ddd;
      border-radius: 50%;
      width: 52px;
      height: 52px;
      font-size: 1.3rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
    }

    .float-btn:hover {
      transform: scale(1.1);
      background: #f5f5f5;
    }

    .float-btn.liked {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      color: white;
      box-shadow: 0 4px 12px rgba(34,197,94,0.4);
    }

    /* Like Count */
    .like-count {
      position: absolute;
      bottom: -18px;
      right: 15px;
      font-size: 0.8rem;
      color: #555;
      font-family: sans-serif;
    }

    /* Comment Popup */
    .comment-popup {
      position: fixed;
      bottom: -100%;
      left: 0;
      width: 100%;
      max-height: 85%;
      background: #fff;
      border-radius: 20px 20px 0 0;
      box-shadow: 0 -6px 20px rgba(0,0,0,0.25);
      padding: 20px;
      z-index: 2000;
      display: flex;
      flex-direction: column;
      transition: bottom 0.4s ease;
    }

    .comment-popup.active {
      bottom: 0;
    }

    .popup-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-family: sans-serif;
      font-weight: 600;
      font-size: 1.1rem;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }

    .close-popup {
      background: none;
      border: none;
      font-size: 1.4rem;
      cursor: pointer;
      color: #666;
    }

    .comments-list {
      flex: 1;
      overflow-y: auto;
      margin-top: 15px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .comment-item {
      background: #f9fafb;
      padding: 10px 14px;
      border-radius: 12px;
      font-family: sans-serif;
      font-size: 0.95rem;
      line-height: 1.4;
      border: 1px solid #eee;
    }

    .comment-item strong {
      display: block;
      margin-bottom: 4px;
      color: #111;
      font-size: 0.95rem;
    }

    .comment-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      border-top: 1px solid #eee;
      padding-top: 10px;
      margin-top: 12px;
    }

    .comment-form input,
    .comment-form textarea {
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 10px;
      font-family: sans-serif;
      font-size: 0.95rem;
      width: 100%;
      resize: none;
      outline: none;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .comment-form input:focus,
    .comment-form textarea:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37,99,235,0.15);
    }

    .comment-form button {
      align-self: flex-start;
      background: linear-gradient(90deg, #2563eb, #1d4ed8);
      color: white;
      border: none;
      border-radius: 40px;
      padding: 8px 22px;
      cursor: pointer;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(37,99,235,0.3);
    }

    .comment-form button:hover {
      transform: scale(1.05);
    }

    .comment-form button.sent {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      box-shadow: 0 4px 10px rgba(34,197,94,0.4);
      cursor: default;
      transform: none;
    }

    /* Scrollbar */
    .comments-list::-webkit-scrollbar {
      width: 6px;
    }
    .comments-list::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 4px;
    }

    /* Responsive */
    @media (max-width: 600px) {
      .float-btn {
        width: 48px;
        height: 48px;
        font-size: 1.2rem;
      }
      .comment-popup {
        padding: 16px;
      }
    }
  </style>
<!-- Floating Like + Comment Buttons -->
  <div class="floating-buttons">
    <div style="position: relative;">
      <button class="float-btn" id="likeBtn">â¤ï¸</button>
      <span class="like-count" id="likeCount">0</span>
    </div>
    <button class="float-btn" id="commentBtn">ğŸ’¬</button>
  </div>

  <!-- Comment Popup -->
  <div class="comment-popup" id="commentPopup">
    <div class="popup-header">
      <span>Comments</span>
      <button class="close-popup" id="closePopup">âœ•</button>
    </div>

    <div class="comments-list" id="commentsList"></div>

    <form class="comment-form" action="https://formspree.io/f/xkgvkele" method="POST" id="commentForm">
      <input type="text" id="name" name="name" placeholder="Your name" required />
      <textarea id="comment" name="comment" placeholder="Write a comment..." required></textarea>
      <button type="submit" id="sendBtn">Send</button>
    </form>
  </div>

<script>
    /* ---------------- LIKE SYSTEM ---------------- */
    const likeBtn = document.getElementById("likeBtn");
    const likeCount = document.getElementById("likeCount");

    const storyKey = location.pathname.split("/").pop();
    const likedKey = `liked_${storyKey}`;
    const countKey = `likeCount_${storyKey}`;

    let liked = localStorage.getItem(likedKey) === "true";
    let count = parseInt(localStorage.getItem(countKey));

    if (isNaN(count)) {
      count = Math.floor(15 + Math.random() * 50);
      localStorage.setItem(countKey, count);
    }

    updateLikeUI();

    likeBtn.addEventListener("click", () => {
      liked = !liked;
      count = liked ? count + 1 : Math.max(0, count - 1);
      localStorage.setItem(likedKey, liked);
      localStorage.setItem(countKey, count);
      updateLikeUI();
    });

    function updateLikeUI() {
      likeBtn.classList.toggle("liked", liked);
      likeCount.textContent = count;
    }

    /* ---------------- COMMENT POPUP ---------------- */
    const commentBtn = document.getElementById("commentBtn");
    const commentPopup = document.getElementById("commentPopup");
    const closePopup = document.getElementById("closePopup");
    const commentsList = document.getElementById("commentsList");
    const commentForm = document.getElementById("commentForm");
    const sendBtn = document.getElementById("sendBtn");

    commentBtn.addEventListener("click", () => {
      commentPopup.classList.add("active");
    });

    closePopup.addEventListener("click", () => {
      commentPopup.classList.remove("active");
    });

    /* Load saved comments */
    const commentsKey = `comments_${storyKey}`;
    let comments = JSON.parse(localStorage.getItem(commentsKey)) || [];
    renderComments();

    function renderComments() {
      commentsList.innerHTML = comments.length
        ? comments.map(c => `<div class="comment-item"><strong>${c.name}</strong>${c.text}</div>`).join("")
        : `<p style="color:#777;font-family:sans-serif;font-size:0.9rem;">No comments yet.</p>`;
    }

    /* Submit comment */
    commentForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const text = document.getElementById("comment").value.trim();
      if (!name || !text) return;

      // Save locally
      comments.push({ name, text });
      localStorage.setItem(commentsKey, JSON.stringify(comments));
      renderComments();

      // Send to Formspree
      const formData = new FormData(commentForm);
      const action = commentForm.getAttribute("action");

      try {
        const res = await fetch(action, { method: "POST", body: formData, headers: { 'Accept': 'application/json' } });
        if (res.ok) {
          sendBtn.textContent = "Sent âœ…";
          sendBtn.classList.add("sent");
          sendBtn.disabled = true;
          commentForm.reset();
          setTimeout(() => {
            sendBtn.textContent = "Send";
            sendBtn.classList.remove("sent");
            sendBtn.disabled = false;
          }, 2000);
        }
      } catch {
        alert("Connection failed. Please try again.");
      }
    });
  </script>
<footer class="site-footer">
  <p>Â© <span id="year"></span> Daily Pixel. All rights reserved.</p>
</footer>

</body>
</html>
