<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Lantern of Al-Qasbah</title>
  <link rel="stylesheet" href="../style.css" />
</head>
<body>
  <a class="back-link" href="../index.html">← Back to Stories</a>
  <article class="story-page">
    <header class="story-header">
      <h1>The Lantern of Al-Qasbah</h1>
      <p class="meta">October 28, 2025 • By Rowan Hale</p>
      <div class="tags">
        <span class="tag">History</span>
        <span class="tag">Historical Fiction</span>
        <span class="tag">Karachi</span>
        <span class="tag">Courage</span>
         <span class="tag">Culture</span>
        <span class="tag">Adventure</span>
        <span class="tag">18th Century</span>
      </div>
      <img class="featured-image" src="https://images.unsplash.com/photo-1696485262806-d4a546c43987?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTF8fEElMjBiZWF1dGlmdWxseSUyMGRldGFpbGVkJTIwaWxsdXN0cmF0aW9uJTIwb2YlMjBhbiUyMDE4dGglMjBjZW50dXJ5JTIwS2FyYWNoaSUyMGxhbnRlcm4lMjBzaG9wJTIwaW4lMjBBbC1RYXNiYWglMjBNYXJrZXQuJTIwVGhlJTIwc2hvcCUyMGdsb3dzJTIwd2FybWx5JTIwYXQlMjBzdW5zZXQlMkMlMjB3aXRoJTIwYSUyMGJyYXNzJTIwbGFudGVybiUyMGVtaXR0aW5nJTIwYSUyMG1hZ2ljYWwlMkMlMjBzdGFyLWxpa2UlMjBsaWdodCUyMHdoaWxlJTIwY3Jvd2RzJTIwaW4lMjB0cmFkaXRpb25hbCUyMGNsb3RoaW5nJTIwcGFzcyUyMGJ5LnxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&q=60&w=500" alt="A beautifully detailed illustration of an 18th century Karachi lantern shop in Al-Qasbah Market. The shop glows warmly at sunset, with a brass lantern emitting a magical, star-like light while crowds in traditional clothing pass by.">
    </header>

    <main class="story-content">
      
<p>In 1762, Karachi was not yet the sprawling metropolis it would one day become. It was a rising port city known as <strong>Kolachi-jo-Goth,</strong> where fishermen, traders, and travelers crossed paths under the blazing Arabian sun. The heart of it all was <strong>Al-Qasbah Market,</strong> alive with voices, clattering carts, and the sweet fragrance of spices that perfumed the air.</p>
<p>Mahmoud, an energetic fourteen-year-old apprentice, worked in a small shop tucked between a weaver’s hut and a date vendor. His master, Ustad Kareem, was a merchant of lamps, oils, and handcrafted lanterns. Unlike other trades, this work required both skill and patience. The right lantern could brighten a celebration. The wrong one could leave a home in darkness.</p>
<p>One evening, as the last rays of gold washed over the rooftops, a cloaked traveler entered the shop. His beard was long, his voice hoarse from miles of silence.</p>
<p>“Is your master here?” he asked.</p>
<p>“No,” Mahmoud answered carefully. “He has gone to the port for goods.”</p>
<p>The stranger set down a dusty lantern wrapped in an embroidered cloth. Its frame was made of tarnished brass, and its glass shimmered as if it held starlight.</p>
<p>“This must be restored,” the man said. “No one else must touch it. Not even Kareem. Only you.”</p>
<p>Mahmoud felt a chill prickle his skin. “Why me?”</p>
<p>“Because you still believe in wonder.”</p>
<p>Before Mahmoud could speak again, the man slipped into the disappearing crowd.</p>
<p>He examined the lantern through the evening. Inside its glass, faint symbols flickered like constellations. When he lit the wick, instead of a flame, a swirling light projected shapes onto the walls. He saw <strong>Karachi’s coastline,</strong> but not as it looked now. Ships with foreign flags lined the harbor. Cannons glimmered on their decks.</p>
<p>He gasped as the projection zoomed into Al-Qasbah Market. He saw soldiers tearing through the stalls, traders in chains, and his own shop engulfed in fire.</p>
<p>He stumbled back, heart pounding.</p>
<p>What had the traveler given him? A lantern that revealed… the future?</p>
<p>The next morning, foreign envoys arrived. British officers paraded with polished boots and confident arrogance. They called themselves allies, but Mahmoud recognized the flags from the lantern’s warning.</p>
<p>The officers roamed the market, marking buildings, studying the coastline. One particular officer, Captain Harlow, spotted the lantern shop and strode in with authority.</p>
<p>“That lantern,” he said, pointing to the restored piece now shining on the counter. “We will buy it.”</p>
<p>“It is not for sale,” Mahmoud said, steady but frightened.</p>
<p>Harlow leaned closer. “Everything has a price, boy. Even history.”</p>
<p>He left for the moment, yet his eyes promised return.</p>

<p>Mahmoud rushed through the market seeking the mysterious traveler. At the harbor, he finally found him watching the waves.</p>
<p>“You saw the truth,” the traveler said. “The lantern shows what history will become if we do nothing.”</p>
<p>“What must I do?” Mahmoud asked.</p>
<p>“Protect it. Show it to the elders. They will believe you if the vision speaks for itself.”</p>
<p>With urgency fueling his courage, Mahmoud called the leaders of the market that night. He lit the lantern for all to see. Gasps filled the room as the terrible future danced across the walls.</p>
<p>“This is what awaits our children,” Mahmoud declared. “Unless we resist.”</p>
<p>The merchants, fishermen, and scholars united that very evening. They coordinated defenses, fortified the docks, and refused the British soldiers any control or leverage.</p>
<p>The next day, Captain Harlow returned with intent to seize by force. Except he found a community standing together, unarmed yet unwavering.</p>
<p>“Our city is not for the taking,” Ustad Kareem said.</p>
<p>The British withdrew after realizing no trade routes or alliances would be gained through fear.</p>

<p>Al-Qasbah remained safe. For now.</p>
<p>Mahmoud placed the lantern deep inside a chest beneath the shop.</p>
<p>History, he realized, was not written only by conquerors. It was safeguarded by those who dared to look ahead.</p>

<hr>

<p><strong>Meaning / Reflection:</strong></p>
<p>History does not only belong to the past. Every choice made today shapes the stories future generations will inherit. Resistance to injustice begins with the courage to see danger before it arrives.</p>

<hr>


      <p class="end-note">— End of Story —</p>
    </main>

    <nav class="story-navigation">
      <a href="story306.html" class="nav-button prev">← Previous Story</a>
      <a href="story308.html" class="nav-button next">Next Story →</a>
    </nav>
  </article>

  <script src="../js/storyFeatures.js"></script>
<style>
    body {
      font-family: 'Noto Nastaliq Urdu', serif;
      margin: 0;
      background: #fff;
    }

    /* Like + Comment Floating Buttons */
    .floating-buttons {
      position: fixed;
      bottom: 22px;
      right: 20px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 12px;
      z-index: 1000;
    }

    .float-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      background: #ffffff;
      color: #111;
      border: 1px solid #ddd;
      border-radius: 50%;
      width: 52px;
      height: 52px;
      font-size: 1.3rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
    }

    .float-btn:hover {
      transform: scale(1.1);
      background: #f5f5f5;
    }

    .float-btn.liked {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      color: white;
      box-shadow: 0 4px 12px rgba(34,197,94,0.4);
    }

    /* Like Count */
    .like-count {
      position: absolute;
      bottom: -18px;
      right: 15px;
      font-size: 0.8rem;
      color: #555;
      font-family: sans-serif;
    }

    /* Comment Popup */
    .comment-popup {
      position: fixed;
      bottom: -100%;
      left: 0;
      width: 100%;
      max-height: 85%;
      background: #fff;
      border-radius: 20px 20px 0 0;
      box-shadow: 0 -6px 20px rgba(0,0,0,0.25);
      padding: 20px;
      z-index: 2000;
      display: flex;
      flex-direction: column;
      transition: bottom 0.4s ease;
    }

    .comment-popup.active {
      bottom: 0;
    }

    .popup-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-family: sans-serif;
      font-weight: 600;
      font-size: 1.1rem;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }

    .close-popup {
      background: none;
      border: none;
      font-size: 1.4rem;
      cursor: pointer;
      color: #666;
    }

    .comments-list {
      flex: 1;
      overflow-y: auto;
      margin-top: 15px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .comment-item {
      background: #f9fafb;
      padding: 10px 14px;
      border-radius: 12px;
      font-family: sans-serif;
      font-size: 0.95rem;
      line-height: 1.4;
      border: 1px solid #eee;
    }

    .comment-item strong {
      display: block;
      margin-bottom: 4px;
      color: #111;
      font-size: 0.95rem;
    }

    .comment-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      border-top: 1px solid #eee;
      padding-top: 10px;
      margin-top: 12px;
    }

    .comment-form input,
    .comment-form textarea {
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 10px;
      font-family: sans-serif;
      font-size: 0.95rem;
      width: 100%;
      resize: none;
      outline: none;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .comment-form input:focus,
    .comment-form textarea:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37,99,235,0.15);
    }

    .comment-form button {
      align-self: flex-start;
      background: linear-gradient(90deg, #2563eb, #1d4ed8);
      color: white;
      border: none;
      border-radius: 40px;
      padding: 8px 22px;
      cursor: pointer;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(37,99,235,0.3);
    }

    .comment-form button:hover {
      transform: scale(1.05);
    }

    .comment-form button.sent {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      box-shadow: 0 4px 10px rgba(34,197,94,0.4);
      cursor: default;
      transform: none;
    }

    /* Scrollbar */
    .comments-list::-webkit-scrollbar {
      width: 6px;
    }
    .comments-list::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 4px;
    }

    /* Responsive */
    @media (max-width: 600px) {
      .float-btn {
        width: 48px;
        height: 48px;
        font-size: 1.2rem;
      }
      .comment-popup {
        padding: 16px;
      }
    }
  </style>
<!-- Floating Like + Comment Buttons -->
  <div class="floating-buttons">
    <div style="position: relative;">
      <button class="float-btn" id="likeBtn">❤️</button>
      <span class="like-count" id="likeCount">0</span>
    </div>
    <button class="float-btn" id="commentBtn">💬</button>
  </div>

  <!-- Comment Popup -->
  <div class="comment-popup" id="commentPopup">
    <div class="popup-header">
      <span>Comments</span>
      <button class="close-popup" id="closePopup">✕</button>
    </div>

    <div class="comments-list" id="commentsList"></div>

    <form class="comment-form" action="https://formspree.io/f/xkgvkele" method="POST" id="commentForm">
      <input type="text" id="name" name="name" placeholder="Your name" required />
      <textarea id="comment" name="comment" placeholder="Write a comment..." required></textarea>
      <button type="submit" id="sendBtn">Send</button>
    </form>
  </div>

<script>
    /* ---------------- LIKE SYSTEM ---------------- */
    const likeBtn = document.getElementById("likeBtn");
    const likeCount = document.getElementById("likeCount");

    const storyKey = location.pathname.split("/").pop();
    const likedKey = `liked_${storyKey}`;
    const countKey = `likeCount_${storyKey}`;

    let liked = localStorage.getItem(likedKey) === "true";
    let count = parseInt(localStorage.getItem(countKey));

    if (isNaN(count)) {
      count = Math.floor(15 + Math.random() * 50);
      localStorage.setItem(countKey, count);
    }

    updateLikeUI();

    likeBtn.addEventListener("click", () => {
      liked = !liked;
      count = liked ? count + 1 : Math.max(0, count - 1);
      localStorage.setItem(likedKey, liked);
      localStorage.setItem(countKey, count);
      updateLikeUI();
    });

    function updateLikeUI() {
      likeBtn.classList.toggle("liked", liked);
      likeCount.textContent = count;
    }

    /* ---------------- COMMENT POPUP ---------------- */
    const commentBtn = document.getElementById("commentBtn");
    const commentPopup = document.getElementById("commentPopup");
    const closePopup = document.getElementById("closePopup");
    const commentsList = document.getElementById("commentsList");
    const commentForm = document.getElementById("commentForm");
    const sendBtn = document.getElementById("sendBtn");

    commentBtn.addEventListener("click", () => {
      commentPopup.classList.add("active");
    });

    closePopup.addEventListener("click", () => {
      commentPopup.classList.remove("active");
    });

    /* Load saved comments */
    const commentsKey = `comments_${storyKey}`;
    let comments = JSON.parse(localStorage.getItem(commentsKey)) || [];
    renderComments();

    function renderComments() {
      commentsList.innerHTML = comments.length
        ? comments.map(c => `<div class="comment-item"><strong>${c.name}</strong>${c.text}</div>`).join("")
        : `<p style="color:#777;font-family:sans-serif;font-size:0.9rem;">No comments yet.</p>`;
    }

    /* Submit comment */
    commentForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const text = document.getElementById("comment").value.trim();
      if (!name || !text) return;

      // Save locally
      comments.push({ name, text });
      localStorage.setItem(commentsKey, JSON.stringify(comments));
      renderComments();

      // Send to Formspree
      const formData = new FormData(commentForm);
      const action = commentForm.getAttribute("action");

      try {
        const res = await fetch(action, { method: "POST", body: formData, headers: { 'Accept': 'application/json' } });
        if (res.ok) {
          sendBtn.textContent = "Sent ✅";
          sendBtn.classList.add("sent");
          sendBtn.disabled = true;
          commentForm.reset();
          setTimeout(() => {
            sendBtn.textContent = "Send";
            sendBtn.classList.remove("sent");
            sendBtn.disabled = false;
          }, 2000);
        }
      } catch {
        alert("Connection failed. Please try again.");
      }
    });
  </script>
  <footer class="site-footer">
    <p>© <span id="year"></span> Daily Pixel. All rights reserved.</p>
  </footer>
</body>
</html>
