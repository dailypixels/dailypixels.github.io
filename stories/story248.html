<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Man with the Umbrella</title>
  <link rel="stylesheet" href="../style.css" />
</head>
<body>
  <a class="back-link" href="../index.html">â† Back to Stories</a>
  <article class="story-page">
    <header class="story-header">
      <h1>The Man with the Umbrella</h1>
      <p class="meta">October 19, 2025 â€¢ By Clara Renfield</p>
      <div class="tags">
        <span class="tag">hope</span>
        <span class="tag">kindness</span>
        <span class="tag">change</span>
      </div>
      <img class="featured-image" src="https://media.istockphoto.com/id/1395851181/photo/rain-in-the-street-of-jakarta-city-at-night-people-and-car-in-silhouette-on-the-pedestrian-at.webp?a=1&b=1&s=612x612&w=0&k=20&c=paBhQTUOj7WuHPJQMGE5oGRPzO-uUvEMtroFYbfwJOU=" alt="A rainy street in the city, a man holding an umbrella over a strangerâ€™s head under the soft glow of streetlights.">
    </header>

    <main class="story-content">
      <p>It was raining again â€” the kind of steady, unrelenting rain that made the city blur into gray. People rushed down the streets, heads bowed beneath umbrellas, puddles swallowing footsteps. Emma Clark stood at the bus stop, drenched, because sheâ€™d lost hers earlier that morning.</p>

<p>She was late. Her coat clung to her arms, her bag was soaked through, and her mood had drowned hours ago. The day had started with a missed alarm, a spilled coffee, and a rejection email from a job sheâ€™d hoped for. The rain just seemed like the universeâ€™s way of adding punctuation to her misery.</p>

<p>And then she heard a voice.</p>

<p>â€œYouâ€™ll catch a cold if you stand like that.â€</p>

<p>She turned. An older man stood beside her, holding a large black umbrella. Without hesitation, he tilted it to cover her too.</p>

<p>â€œOhâ€”thank you,â€ she said awkwardly. â€œIâ€™m fine, really.â€</p>

<p>â€œYou donâ€™t look fine,â€ he smiled. â€œBut thatâ€™s okay. Most people arenâ€™t when they say that.â€</p>

<p>His name was Walter. His coat was too big, his shoes were scuffed, and his umbrella looked older than she was. He didnâ€™t seem to be in a hurry, though buses came and went. Instead, he stood there, humming softly, the rain drumming above them like a quiet song.</p>

<p>â€œRough day?â€ he asked.</p>

<p>Emma exhaled. â€œYou could say that.â€</p>

<p>â€œI used to have those every day,â€ Walter said. â€œBack when I thought the world owed me something for trying.â€</p>

<p>She looked at him, curious. â€œAnd now?â€</p>

<p>â€œNow I just try for the sake of trying.â€</p>

<p>Something about the simplicity of that hit her harder than she expected. For a long while, they stood in silence â€” two strangers sharing a small circle of shelter in the endless rain.</p>

<hr>

<p>When her bus finally arrived, she hesitated before stepping on. â€œThank you, Walter. Forâ€¦ the umbrella, and the company.â€</p>

<p>He nodded. â€œKeep it.â€</p>

<p>â€œI canâ€™t take your umbrella.â€</p>

<p>â€œYou can,â€ he said. â€œJust promise me one thing: when the rain stops, give it to someone else who needs it.â€</p>

<p>Before she could argue, he smiled, turned, and walked away â€” no hat, no coat, no umbrella â€” disappearing into the storm like a figure made of mist.</p>

<hr>

<p>Days passed. The rain stopped, the sky cleared, and Emma found herself thinking of Walter. She carried the umbrella everywhere â€” through interviews, errands, and mornings when she still doubted herself. It became a quiet symbol of kindness, something she couldnâ€™t forget.</p>

<p>Then, one afternoon, as she left a cafÃ©, she saw a woman sitting on the curb, crying â€” her hands shaking, her jacket thin against the cold drizzle that had begun again.</p>

<p>Emma didnâ€™t think twice. She opened the umbrella and placed it gently into the womanâ€™s hands.</p>

<p>â€œYouâ€™ll catch a cold if you stay like that,â€ she said, smiling.</p>

<p>The woman looked up, startled, then grateful. Emma turned and walked away before she could ask her name â€” just as Walter had done.</p>

<p>Somewhere in the city, another story had begun.</p>

<hr>

<p><strong>Meaning / Reflection:</strong><br>
<em>The Man with the Umbrella</em> reminds us that kindness is a ripple â€” what begins as one small gesture can travel farther than we ever see. We donâ€™t need to fix the world all at once. Sometimes, itâ€™s enough to keep one person dry in the rain. â˜”ğŸ’›</p>

      <p class="end-note">â€” End of Story â€”</p>
    </main>

    <nav class="story-navigation">
      <a href="story247.html" class="nav-button prev">â† Previous Story</a>
      <a href="story249.html" class="nav-button next">Next Story â†’</a>
    </nav>
  </article>
<script src="../js/storyFeatures.js"></script>
<style>
    body {
      font-family: 'Noto Nastaliq Urdu', serif;
      margin: 0;
      background: #fff;
    }

    /* Like + Comment Floating Buttons */
    .floating-buttons {
      position: fixed;
      bottom: 22px;
      right: 20px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 12px;
      z-index: 1000;
    }

    .float-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      background: #ffffff;
      color: #111;
      border: 1px solid #ddd;
      border-radius: 50%;
      width: 52px;
      height: 52px;
      font-size: 1.3rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
    }

    .float-btn:hover {
      transform: scale(1.1);
      background: #f5f5f5;
    }

    .float-btn.liked {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      color: white;
      box-shadow: 0 4px 12px rgba(34,197,94,0.4);
    }

    /* Like Count */
    .like-count {
      position: absolute;
      bottom: -18px;
      right: 15px;
      font-size: 0.8rem;
      color: #555;
      font-family: sans-serif;
    }

    /* Comment Popup */
    .comment-popup {
      position: fixed;
      bottom: -100%;
      left: 0;
      width: 100%;
      max-height: 85%;
      background: #fff;
      border-radius: 20px 20px 0 0;
      box-shadow: 0 -6px 20px rgba(0,0,0,0.25);
      padding: 20px;
      z-index: 2000;
      display: flex;
      flex-direction: column;
      transition: bottom 0.4s ease;
    }

    .comment-popup.active {
      bottom: 0;
    }

    .popup-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-family: sans-serif;
      font-weight: 600;
      font-size: 1.1rem;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }

    .close-popup {
      background: none;
      border: none;
      font-size: 1.4rem;
      cursor: pointer;
      color: #666;
    }

    .comments-list {
      flex: 1;
      overflow-y: auto;
      margin-top: 15px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .comment-item {
      background: #f9fafb;
      padding: 10px 14px;
      border-radius: 12px;
      font-family: sans-serif;
      font-size: 0.95rem;
      line-height: 1.4;
      border: 1px solid #eee;
    }

    .comment-item strong {
      display: block;
      margin-bottom: 4px;
      color: #111;
      font-size: 0.95rem;
    }

    .comment-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      border-top: 1px solid #eee;
      padding-top: 10px;
      margin-top: 12px;
    }

    .comment-form input,
    .comment-form textarea {
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 10px;
      font-family: sans-serif;
      font-size: 0.95rem;
      width: 100%;
      resize: none;
      outline: none;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .comment-form input:focus,
    .comment-form textarea:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37,99,235,0.15);
    }

    .comment-form button {
      align-self: flex-start;
      background: linear-gradient(90deg, #2563eb, #1d4ed8);
      color: white;
      border: none;
      border-radius: 40px;
      padding: 8px 22px;
      cursor: pointer;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(37,99,235,0.3);
    }

    .comment-form button:hover {
      transform: scale(1.05);
    }

    .comment-form button.sent {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      box-shadow: 0 4px 10px rgba(34,197,94,0.4);
      cursor: default;
      transform: none;
    }

    /* Scrollbar */
    .comments-list::-webkit-scrollbar {
      width: 6px;
    }
    .comments-list::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 4px;
    }

    /* Responsive */
    @media (max-width: 600px) {
      .float-btn {
        width: 48px;
        height: 48px;
        font-size: 1.2rem;
      }
      .comment-popup {
        padding: 16px;
      }
    }
  </style>
<!-- Floating Like + Comment Buttons -->
  <div class="floating-buttons">
    <div style="position: relative;">
      <button class="float-btn" id="likeBtn">â¤ï¸</button>
      <span class="like-count" id="likeCount">0</span>
    </div>
    <button class="float-btn" id="commentBtn">ğŸ’¬</button>
  </div>

  <!-- Comment Popup -->
  <div class="comment-popup" id="commentPopup">
    <div class="popup-header">
      <span>Comments</span>
      <button class="close-popup" id="closePopup">âœ•</button>
    </div>

    <div class="comments-list" id="commentsList"></div>

    <form class="comment-form" action="https://formspree.io/f/xkgvkele" method="POST" id="commentForm">
      <input type="text" id="name" name="name" placeholder="Your name" required />
      <textarea id="comment" name="comment" placeholder="Write a comment..." required></textarea>
      <button type="submit" id="sendBtn">Send</button>
    </form>
  </div>

<script>
    /* ---------------- LIKE SYSTEM ---------------- */
    const likeBtn = document.getElementById("likeBtn");
    const likeCount = document.getElementById("likeCount");

    const storyKey = location.pathname.split("/").pop();
    const likedKey = `liked_${storyKey}`;
    const countKey = `likeCount_${storyKey}`;

    let liked = localStorage.getItem(likedKey) === "true";
    let count = parseInt(localStorage.getItem(countKey));

    if (isNaN(count)) {
      count = Math.floor(15 + Math.random() * 50);
      localStorage.setItem(countKey, count);
    }

    updateLikeUI();

    likeBtn.addEventListener("click", () => {
      liked = !liked;
      count = liked ? count + 1 : Math.max(0, count - 1);
      localStorage.setItem(likedKey, liked);
      localStorage.setItem(countKey, count);
      updateLikeUI();
    });

    function updateLikeUI() {
      likeBtn.classList.toggle("liked", liked);
      likeCount.textContent = count;
    }

    /* ---------------- COMMENT POPUP ---------------- */
    const commentBtn = document.getElementById("commentBtn");
    const commentPopup = document.getElementById("commentPopup");
    const closePopup = document.getElementById("closePopup");
    const commentsList = document.getElementById("commentsList");
    const commentForm = document.getElementById("commentForm");
    const sendBtn = document.getElementById("sendBtn");

    commentBtn.addEventListener("click", () => {
      commentPopup.classList.add("active");
    });

    closePopup.addEventListener("click", () => {
      commentPopup.classList.remove("active");
    });

    /* Load saved comments */
    const commentsKey = `comments_${storyKey}`;
    let comments = JSON.parse(localStorage.getItem(commentsKey)) || [];
    renderComments();

    function renderComments() {
      commentsList.innerHTML = comments.length
        ? comments.map(c => `<div class="comment-item"><strong>${c.name}</strong>${c.text}</div>`).join("")
        : `<p style="color:#777;font-family:sans-serif;font-size:0.9rem;">No comments yet.</p>`;
    }

    /* Submit comment */
    commentForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const text = document.getElementById("comment").value.trim();
      if (!name || !text) return;

      // Save locally
      comments.push({ name, text });
      localStorage.setItem(commentsKey, JSON.stringify(comments));
      renderComments();

      // Send to Formspree
      const formData = new FormData(commentForm);
      const action = commentForm.getAttribute("action");

      try {
        const res = await fetch(action, { method: "POST", body: formData, headers: { 'Accept': 'application/json' } });
        if (res.ok) {
          sendBtn.textContent = "Sent âœ…";
          sendBtn.classList.add("sent");
          sendBtn.disabled = true;
          commentForm.reset();
          setTimeout(() => {
            sendBtn.textContent = "Send";
            sendBtn.classList.remove("sent");
            sendBtn.disabled = false;
          }, 2000);
        }
      } catch {
        alert("Connection failed. Please try again.");
      }
    });
  </script>
<footer class="site-footer">
  <p>Â© <span id="year"></span> Daily Pixel. All rights reserved.</p>
</footer>

</body>
</html>
