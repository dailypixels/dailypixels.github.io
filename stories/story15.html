<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Map Beneath the Wind</title>
  <link rel="stylesheet" href="../style.css" />
</head>
<body>
  <a class="back-link" href="../index.html">‚Üê Back to Stories</a>
  <article class="story-page">
    <header class="story-header">
      <h1>The Map Beneath the Wind</h1>
      <p class="meta">November 1, 2025 ‚Ä¢ By Mahira Ansari</p>
      <div class="tags">
        <span class="tag">exploration</span>
        <span class="tag">destiny</span>
        <span class="tag">courage</span>
      </div>
      <img 
        class="featured-image" 
        src="https://media.istockphoto.com/id/537360016/photo/hands-holding-a-paper-map.webp?a=1&b=1&s=612x612&w=0&k=20&c=eQZZGONA4_5tZ_03DvcEHL8TOfeLta-UW6ESKhpPpAw=" 
        alt="A torn map fluttering on an ancient stone table under the open sky ‚Äî the wind tugging at its edges as if trying to reveal where it truly leads.">
    </header>

    <main class="story-content">
      <p> The wind in the Himalayas has a voice. <br><br> It hums through the rocks, sings through the pines, and whispers to those who are willing to listen. <br> I was not listening the day I found the map. I was only running ‚Äî from my last expedition, my last mistake, my last version of myself. </p> <p> It was tucked inside an old compass box in Leh‚Äôs marketplace, sold by a boy who claimed it had once belonged to a ‚Äúwanderer who disappeared beyond the white cliffs.‚Äù <br><br> The map was incomplete ‚Äî a jagged edge, half-torn, drawn in ink that shimmered faintly under sunlight. At the bottom corner, a single phrase was written in faded Urdu: <em>‚ÄúFollow the wind that remembers your name.‚Äù</em> </p> <p> For weeks, I chased that wind ‚Äî across frozen ridges, hanging bridges, and valleys where the sun seemed afraid to stay too long. My guide, Rehan, said I was mad. ‚ÄúMaps don‚Äôt remember people,‚Äù he muttered. I smiled. ‚ÄúMaybe this one does.‚Äù </p> <p> By the third week, the path had vanished completely. We camped near a ravine where even the stars looked lost. That night, a storm arrived ‚Äî fierce and wordless. When it passed, the map was gone, carried away by the wind itself. </p> <p> I searched for it until dawn. The snow glowed pale blue under the rising sun, and there, half-buried near a fallen prayer flag, was the torn paper. But now it looked different. <br><br> A faint new line had appeared ‚Äî one that curved toward the east, ending at a mark shaped like a circle. I didn‚Äôt draw it. The map had drawn itself. </p> <p> We followed the new trail for two more days, climbing higher until the air grew thin and silence felt sacred. At the top of the ridge, the valley opened before us ‚Äî wide, green, and untouched. A place that didn‚Äôt exist on any modern chart. In the center stood a stone arch engraved with words weathered by centuries: <em>‚ÄúNot all maps are made of paper.‚Äù</em> </p> <p> I walked beneath it, feeling something shift inside ‚Äî as if all the searching, all the running, had led not to a place, but to a peace. I realized the map hadn‚Äôt been showing me *where* to go ‚Äî it had been showing me *how* to return. </p> <p> Rehan smiled faintly beside me. ‚ÄúSo this is it? The hidden valley?‚Äù <br> I looked around ‚Äî at the wildflowers, the wind, the endless sky ‚Äî and said quietly, ‚ÄúNo, Rehan. This is the moment we stop searching.‚Äù </p> <p> That night, we built no fire. We simply watched the stars scatter like pieces of a broken compass. And for the first time, I understood what the map meant ‚Äî The wind doesn‚Äôt carry directions. It carries memory. <br><br> You just have to be still enough to let it take you home. </p>
<p> <strong>Meaning / Reflection:</strong><br> *The Map Beneath the Wind* reminds us that not every journey is about reaching somewhere new ‚Äî some are about returning to where our courage began. Adventure isn‚Äôt just about mountains or oceans; it‚Äôs about rediscovering the parts of us we thought were lost. <br><br> Sometimes, the true destination is the peace that waits when we finally stop running. üå¨Ô∏è </p>

      <p class="end-note">‚Äî End of Story ‚Äî</p>
    </main>

    <nav class="story-navigation">
      <a href="story14.html" class="nav-button prev">‚Üê Previous Story</a>
      <a href="story16.html" class="nav-button next">Next Story ‚Üí</a>
    </nav>
  </article>
  <style>
    body {
      font-family: 'Noto Nastaliq Urdu', serif;
      margin: 0;
      background: #fff;
    }

    /* Like + Comment Floating Buttons */
    .floating-buttons {
      position: fixed;
      bottom: 22px;
      right: 20px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 12px;
      z-index: 1000;
    }

    .float-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      background: #ffffff;
      color: #111;
      border: 1px solid #ddd;
      border-radius: 50%;
      width: 52px;
      height: 52px;
      font-size: 1.3rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
    }

    .float-btn:hover {
      transform: scale(1.1);
      background: #f5f5f5;
    }

    .float-btn.liked {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      color: white;
      box-shadow: 0 4px 12px rgba(34,197,94,0.4);
    }

    /* Like Count */
    .like-count {
      position: absolute;
      bottom: -18px;
      right: 15px;
      font-size: 0.8rem;
      color: #555;
      font-family: sans-serif;
    }

    /* Comment Popup */
    .comment-popup {
      position: fixed;
      bottom: -100%;
      left: 0;
      width: 100%;
      max-height: 85%;
      background: #fff;
      border-radius: 20px 20px 0 0;
      box-shadow: 0 -6px 20px rgba(0,0,0,0.25);
      padding: 20px;
      z-index: 2000;
      display: flex;
      flex-direction: column;
      transition: bottom 0.4s ease;
    }

    .comment-popup.active {
      bottom: 0;
    }

    .popup-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-family: sans-serif;
      font-weight: 600;
      font-size: 1.1rem;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }

    .close-popup {
      background: none;
      border: none;
      font-size: 1.4rem;
      cursor: pointer;
      color: #666;
    }

    .comments-list {
      flex: 1;
      overflow-y: auto;
      margin-top: 15px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .comment-item {
      background: #f9fafb;
      padding: 10px 14px;
      border-radius: 12px;
      font-family: sans-serif;
      font-size: 0.95rem;
      line-height: 1.4;
      border: 1px solid #eee;
    }

    .comment-item strong {
      display: block;
      margin-bottom: 4px;
      color: #111;
      font-size: 0.95rem;
    }

    .comment-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      border-top: 1px solid #eee;
      padding-top: 10px;
      margin-top: 12px;
    }

    .comment-form input,
    .comment-form textarea {
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 10px;
      font-family: sans-serif;
      font-size: 0.95rem;
      width: 100%;
      resize: none;
      outline: none;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .comment-form input:focus,
    .comment-form textarea:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37,99,235,0.15);
    }

    .comment-form button {
      align-self: flex-start;
      background: linear-gradient(90deg, #2563eb, #1d4ed8);
      color: white;
      border: none;
      border-radius: 40px;
      padding: 8px 22px;
      cursor: pointer;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(37,99,235,0.3);
    }

    .comment-form button:hover {
      transform: scale(1.05);
    }

    .comment-form button.sent {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      box-shadow: 0 4px 10px rgba(34,197,94,0.4);
      cursor: default;
      transform: none;
    }

    /* Scrollbar */
    .comments-list::-webkit-scrollbar {
      width: 6px;
    }
    .comments-list::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 4px;
    }

    /* Responsive */
    @media (max-width: 600px) {
      .float-btn {
        width: 48px;
        height: 48px;
        font-size: 1.2rem;
      }
      .comment-popup {
        padding: 16px;
      }
    }
  </style>
<!-- Floating Like + Comment Buttons -->
  <div class="floating-buttons">
    <div style="position: relative;">
      <button class="float-btn" id="likeBtn">‚ù§Ô∏è</button>
      <span class="like-count" id="likeCount">0</span>
    </div>
    <button class="float-btn" id="commentBtn">üí¨</button>
  </div>

  <!-- Comment Popup -->
  <div class="comment-popup" id="commentPopup">
    <div class="popup-header">
      <span>Comments</span>
      <button class="close-popup" id="closePopup">‚úï</button>
    </div>

    <div class="comments-list" id="commentsList"></div>

    <form class="comment-form" action="https://formspree.io/f/xkgvkele" method="POST" id="commentForm">
      <input type="text" id="name" name="name" placeholder="Your name" required />
      <textarea id="comment" name="comment" placeholder="Write a comment..." required></textarea>
      <button type="submit" id="sendBtn">Send</button>
    </form>
  </div>

<script>
    /* ---------------- LIKE SYSTEM ---------------- */
    const likeBtn = document.getElementById("likeBtn");
    const likeCount = document.getElementById("likeCount");

    const storyKey = location.pathname.split("/").pop();
    const likedKey = `liked_${storyKey}`;
    const countKey = `likeCount_${storyKey}`;

    let liked = localStorage.getItem(likedKey) === "true";
    let count = parseInt(localStorage.getItem(countKey));

    if (isNaN(count)) {
      count = Math.floor(15 + Math.random() * 50);
      localStorage.setItem(countKey, count);
    }

    updateLikeUI();

    likeBtn.addEventListener("click", () => {
      liked = !liked;
      count = liked ? count + 1 : Math.max(0, count - 1);
      localStorage.setItem(likedKey, liked);
      localStorage.setItem(countKey, count);
      updateLikeUI();
    });

    function updateLikeUI() {
      likeBtn.classList.toggle("liked", liked);
      likeCount.textContent = count;
    }

    /* ---------------- COMMENT POPUP ---------------- */
    const commentBtn = document.getElementById("commentBtn");
    const commentPopup = document.getElementById("commentPopup");
    const closePopup = document.getElementById("closePopup");
    const commentsList = document.getElementById("commentsList");
    const commentForm = document.getElementById("commentForm");
    const sendBtn = document.getElementById("sendBtn");

    commentBtn.addEventListener("click", () => {
      commentPopup.classList.add("active");
    });

    closePopup.addEventListener("click", () => {
      commentPopup.classList.remove("active");
    });

    /* Load saved comments */
    const commentsKey = `comments_${storyKey}`;
    let comments = JSON.parse(localStorage.getItem(commentsKey)) || [];
    renderComments();

    function renderComments() {
      commentsList.innerHTML = comments.length
        ? comments.map(c => `<div class="comment-item"><strong>${c.name}</strong>${c.text}</div>`).join("")
        : `<p style="color:#777;font-family:sans-serif;font-size:0.9rem;">No comments yet.</p>`;
    }

    /* Submit comment */
    commentForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const text = document.getElementById("comment").value.trim();
      if (!name || !text) return;

      // Save locally
      comments.push({ name, text });
      localStorage.setItem(commentsKey, JSON.stringify(comments));
      renderComments();

      // Send to Formspree
      const formData = new FormData(commentForm);
      const action = commentForm.getAttribute("action");

      try {
        const res = await fetch(action, { method: "POST", body: formData, headers: { 'Accept': 'application/json' } });
        if (res.ok) {
          sendBtn.textContent = "Sent ‚úÖ";
          sendBtn.classList.add("sent");
          sendBtn.disabled = true;
          commentForm.reset();
          setTimeout(() => {
            sendBtn.textContent = "Send";
            sendBtn.classList.remove("sent");
            sendBtn.disabled = false;
          }, 2000);
        }
      } catch {
        alert("Connection failed. Please try again.");
      }
    });
  </script>
<script src="../js/storyFeatures.js"></script>

<footer class="site-footer">
  <p>¬© <span id="year"></span> Daily Pixel. All rights reserved.</p>
</footer>

</body>
</html>
