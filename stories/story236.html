<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Drums of Samarkand</title>
  <link rel="stylesheet" href="../style.css" />
</head>
<body>
  <a class="back-link" href="../index.html">‚Üê Back to Stories</a>
  <article class="story-page">
    <header class="story-header">
      <h1>The Drums of Samarkand</h1>
      <p class="meta">August 1, 2025 ‚Ä¢ By Liora Vale</p>
      <div class="tags">
        <span class="tag">war</span>
        <span class="tag">courage</span>
        <span class="tag">destiny</span>
      </div>
      <img class="featured-image" src="https://media.istockphoto.com/id/868335890/photo/xian-city-wall.webp?a=1&b=1&s=612x612&w=0&k=20&c=A97_T_BSG_gS5sI-mHZbCkQRKZ2-PeQ8AXcBD-cCaTU=" alt="An ancient city glowing under sunset, banners waving over its walls, echoing with the sound of war drums.">
    </header>

    <main class="story-content">
      <p>The sun burned low over the plains of Transoxiana, turning the horizon to molten gold. On the distant walls of Samarkand, the banners of Timur‚Äôs empire fluttered like wounded birds. Beneath them, thousands of soldiers prepared for war ‚Äî horsemen in silver, archers cloaked in dust, and drummers who beat the call of destiny.</p>

<p>Among them stood Arslan, a boy no older than twenty, holding a spear that trembled in his hands. He was born in the far steppes, the son of a shepherd, but today he wore the colors of the conqueror. The emperor himself had called this campaign ‚ÄúThe Last Flame of Empire,‚Äù a march to secure eternity. Yet to Arslan, it felt like marching into the mouth of death.</p>

<p>His commander, Captain Rafiq, rode past him on a black horse. ‚ÄúSteel your heart, boy. Samarkand has fallen a dozen times and risen again. Today, it falls for the last.‚Äù</p>

<p>Arslan nodded, but his thoughts drifted to the city beyond those walls ‚Äî to the people inside, who were not enemies to him but neighbors. He had traded wool for bread with them, years ago, when peace still breathed across the land. Now he was to burn that city to ashes.</p>

<hr>

<p>When the assault began, the world turned to thunder. Arrows darkened the sky. Siege towers groaned forward. Fireballs burst against the gates, scattering embers like stars. Arslan fought beside his comrades, each heartbeat swallowed by chaos.</p>

<p>By nightfall, the walls were breached. The army poured into Samarkand like a flood. Flames devoured the bazaars; screams filled the air. Arslan charged through the smoke until he stumbled into a narrow alley ‚Äî and there, among the ruins, he found a small child clutching her mother‚Äôs hand, both trembling before him.</p>

<p>‚ÄúPlease,‚Äù the woman whispered, her voice raw. ‚ÄúWe are only healers. Spare us.‚Äù</p>

<p>Arslan‚Äôs orders echoed in his mind: *‚ÄúNo mercy. None left to rebuild.‚Äù*</p>

<p>But something inside him broke. He dropped his spear. ‚ÄúGo,‚Äù he said. ‚ÄúRun east. Follow the river until the mountains.‚Äù</p>

<p>She stared at him ‚Äî at the trembling soldier who could have been her own son ‚Äî and then fled into the smoke. Arslan stood alone, surrounded by fire, the drums still beating somewhere far behind him.</p>

<hr>

<p>When the battle ended, Samarkand was silent. The emperor rode through its ruined gates, his armor gilded and his eyes cold. ‚ÄúVictory,‚Äù he declared, ‚Äúis immortality.‚Äù</p>

<p>Arslan stood among the survivors, his face streaked with soot. He no longer believed in immortality ‚Äî only in loss. As the army celebrated, he walked to the city‚Äôs old observatory, where once scholars had mapped the stars. The domes were shattered, but one wall still stood, engraved with an ancient phrase in Persian:</p>

<blockquote>‚ÄúEmpires pass, but the sky remains.‚Äù</blockquote>

<p>Arslan traced the words with his fingers. That night, as the camp slept, he removed his armor, left his sword behind, and vanished into the desert. Some said he became a hermit in the mountains; others said he led the survivors east, building a new village where no drums were heard again.</p>

<p>Years later, travelers told of a man in white robes who healed the wounded and refused all payment. They called him ‚ÄúThe Wanderer of Samarkand.‚Äù When asked of the past, he would only say: ‚ÄúI once served a king. Now I serve mercy.‚Äù</p>

<hr>

<p><strong>Meaning / Reflection:</strong><br>
<em>The Drums of Samarkand</em> is a story about conscience in times of conquest. It reminds us that history is not only written by kings, but also by those who defy them quietly. Arslan‚Äôs choice to spare life over victory speaks to the truth that real strength lies not in domination ‚Äî but in compassion. Even in the heart of empire, mercy can echo louder than war drums. üïäÔ∏è</p>


      <p class="end-note">‚Äî End of Story ‚Äî</p>
    </main>

    <nav class="story-navigation">
      <a href="story235.html" class="nav-button prev">‚Üê Previous Story</a>
      <a href="story237.html" class="nav-button next">Next Story ‚Üí</a>
    </nav>
  </article>
<script src="../js/storyFeatures.js"></script>
<style>
    body {
      font-family: 'Noto Nastaliq Urdu', serif;
      margin: 0;
      background: #fff;
    }

    /* Like + Comment Floating Buttons */
    .floating-buttons {
      position: fixed;
      bottom: 22px;
      right: 20px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 12px;
      z-index: 1000;
    }

    .float-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      background: #ffffff;
      color: #111;
      border: 1px solid #ddd;
      border-radius: 50%;
      width: 52px;
      height: 52px;
      font-size: 1.3rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
    }

    .float-btn:hover {
      transform: scale(1.1);
      background: #f5f5f5;
    }

    .float-btn.liked {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      color: white;
      box-shadow: 0 4px 12px rgba(34,197,94,0.4);
    }

    /* Like Count */
    .like-count {
      position: absolute;
      bottom: -18px;
      right: 15px;
      font-size: 0.8rem;
      color: #555;
      font-family: sans-serif;
    }

    /* Comment Popup */
    .comment-popup {
      position: fixed;
      bottom: -100%;
      left: 0;
      width: 100%;
      max-height: 85%;
      background: #fff;
      border-radius: 20px 20px 0 0;
      box-shadow: 0 -6px 20px rgba(0,0,0,0.25);
      padding: 20px;
      z-index: 2000;
      display: flex;
      flex-direction: column;
      transition: bottom 0.4s ease;
    }

    .comment-popup.active {
      bottom: 0;
    }

    .popup-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-family: sans-serif;
      font-weight: 600;
      font-size: 1.1rem;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }

    .close-popup {
      background: none;
      border: none;
      font-size: 1.4rem;
      cursor: pointer;
      color: #666;
    }

    .comments-list {
      flex: 1;
      overflow-y: auto;
      margin-top: 15px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .comment-item {
      background: #f9fafb;
      padding: 10px 14px;
      border-radius: 12px;
      font-family: sans-serif;
      font-size: 0.95rem;
      line-height: 1.4;
      border: 1px solid #eee;
    }

    .comment-item strong {
      display: block;
      margin-bottom: 4px;
      color: #111;
      font-size: 0.95rem;
    }

    .comment-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      border-top: 1px solid #eee;
      padding-top: 10px;
      margin-top: 12px;
    }

    .comment-form input,
    .comment-form textarea {
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 10px;
      font-family: sans-serif;
      font-size: 0.95rem;
      width: 100%;
      resize: none;
      outline: none;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .comment-form input:focus,
    .comment-form textarea:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37,99,235,0.15);
    }

    .comment-form button {
      align-self: flex-start;
      background: linear-gradient(90deg, #2563eb, #1d4ed8);
      color: white;
      border: none;
      border-radius: 40px;
      padding: 8px 22px;
      cursor: pointer;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(37,99,235,0.3);
    }

    .comment-form button:hover {
      transform: scale(1.05);
    }

    .comment-form button.sent {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      box-shadow: 0 4px 10px rgba(34,197,94,0.4);
      cursor: default;
      transform: none;
    }

    /* Scrollbar */
    .comments-list::-webkit-scrollbar {
      width: 6px;
    }
    .comments-list::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 4px;
    }

    /* Responsive */
    @media (max-width: 600px) {
      .float-btn {
        width: 48px;
        height: 48px;
        font-size: 1.2rem;
      }
      .comment-popup {
        padding: 16px;
      }
    }
  </style>
<!-- Floating Like + Comment Buttons -->
  <div class="floating-buttons">
    <div style="position: relative;">
      <button class="float-btn" id="likeBtn">‚ù§Ô∏è</button>
      <span class="like-count" id="likeCount">0</span>
    </div>
    <button class="float-btn" id="commentBtn">üí¨</button>
  </div>

  <!-- Comment Popup -->
  <div class="comment-popup" id="commentPopup">
    <div class="popup-header">
      <span>Comments</span>
      <button class="close-popup" id="closePopup">‚úï</button>
    </div>

    <div class="comments-list" id="commentsList"></div>

    <form class="comment-form" action="https://formspree.io/f/xkgvkele" method="POST" id="commentForm">
      <input type="text" id="name" name="name" placeholder="Your name" required />
      <textarea id="comment" name="comment" placeholder="Write a comment..." required></textarea>
      <button type="submit" id="sendBtn">Send</button>
    </form>
  </div>

<script>
    /* ---------------- LIKE SYSTEM ---------------- */
    const likeBtn = document.getElementById("likeBtn");
    const likeCount = document.getElementById("likeCount");

    const storyKey = location.pathname.split("/").pop();
    const likedKey = `liked_${storyKey}`;
    const countKey = `likeCount_${storyKey}`;

    let liked = localStorage.getItem(likedKey) === "true";
    let count = parseInt(localStorage.getItem(countKey));

    if (isNaN(count)) {
      count = Math.floor(15 + Math.random() * 50);
      localStorage.setItem(countKey, count);
    }

    updateLikeUI();

    likeBtn.addEventListener("click", () => {
      liked = !liked;
      count = liked ? count + 1 : Math.max(0, count - 1);
      localStorage.setItem(likedKey, liked);
      localStorage.setItem(countKey, count);
      updateLikeUI();
    });

    function updateLikeUI() {
      likeBtn.classList.toggle("liked", liked);
      likeCount.textContent = count;
    }

    /* ---------------- COMMENT POPUP ---------------- */
    const commentBtn = document.getElementById("commentBtn");
    const commentPopup = document.getElementById("commentPopup");
    const closePopup = document.getElementById("closePopup");
    const commentsList = document.getElementById("commentsList");
    const commentForm = document.getElementById("commentForm");
    const sendBtn = document.getElementById("sendBtn");

    commentBtn.addEventListener("click", () => {
      commentPopup.classList.add("active");
    });

    closePopup.addEventListener("click", () => {
      commentPopup.classList.remove("active");
    });

    /* Load saved comments */
    const commentsKey = `comments_${storyKey}`;
    let comments = JSON.parse(localStorage.getItem(commentsKey)) || [];
    renderComments();

    function renderComments() {
      commentsList.innerHTML = comments.length
        ? comments.map(c => `<div class="comment-item"><strong>${c.name}</strong>${c.text}</div>`).join("")
        : `<p style="color:#777;font-family:sans-serif;font-size:0.9rem;">No comments yet.</p>`;
    }

    /* Submit comment */
    commentForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const text = document.getElementById("comment").value.trim();
      if (!name || !text) return;

      // Save locally
      comments.push({ name, text });
      localStorage.setItem(commentsKey, JSON.stringify(comments));
      renderComments();

      // Send to Formspree
      const formData = new FormData(commentForm);
      const action = commentForm.getAttribute("action");

      try {
        const res = await fetch(action, { method: "POST", body: formData, headers: { 'Accept': 'application/json' } });
        if (res.ok) {
          sendBtn.textContent = "Sent ‚úÖ";
          sendBtn.classList.add("sent");
          sendBtn.disabled = true;
          commentForm.reset();
          setTimeout(() => {
            sendBtn.textContent = "Send";
            sendBtn.classList.remove("sent");
            sendBtn.disabled = false;
          }, 2000);
        }
      } catch {
        alert("Connection failed. Please try again.");
      }
    });
  </script>
<footer class="site-footer">
  <p>¬© <span id="year"></span> Daily Pixel. All rights reserved.</p>
</footer>

</body>
</html>
