<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Kingdom Beneath the Clouds</title>
  <link rel="stylesheet" href="../style.css" />
</head>
<body>
  <a class="back-link" href="../index.html">‚Üê Back to Stories</a>
  <article class="story-page">
    <header class="story-header">
      <h1>The Kingdom Beneath the Clouds</h1>
      <p class="meta">March 11, 2025 ‚Ä¢ By Elira Dawn</p>
      <div class="tags">
        <span class="tag">wonder</span>
        <span class="tag">courage</span>
        <span class="tag">destiny</span>
      </div>
      <img 
        class="featured-image" 
        src="https://media.istockphoto.com/id/1445875391/photo/hot-air-balloon-over-bagan-at-sunrise-myanmar.webp?a=1&b=1&s=612x612&w=0&k=20&c=msajlw54rigkE19N4r3Kz4kK0_pNjt260Zj6VzYYu0E=" 
        alt="A vast kingdom floating among golden clouds, with crystal towers and airships gliding between waterfalls that fall upward.">
    </header>

    <main class="story-content">
     <p> On the morning the rain forgot to fall, **Lysa** woke to a sound no one else heard ‚Äî a hum coming from the clouds. <br><br> Her village was small, built along the cliffs of *Aurelion Ridge*, where fog lingered like old secrets. Every evening, she‚Äôd sit by the edge and watch the sky, waiting for something she couldn‚Äôt name. </p> <p> That day, she saw it ‚Äî a shimmer beyond the mist, a stairway of light curling upward into the clouds. People said such things were illusions, tricks of tired eyes. But Lysa‚Äôs heart didn‚Äôt believe in tricks. So she climbed. </p> <p> Step after glowing step, the world below faded, replaced by silence and wind that smelled of silver rain. When she reached the top, she found herself standing on a floating bridge that led to a city unlike any she had ever imagined ‚Äî spires made of glass and stone, rivers that glowed with starlight, and creatures with wings like spun gold. <br><br> A voice greeted her: <br> *"Welcome home, Princess Lysa of Aetherion."* </p> <p> She froze. *"There‚Äôs been a mistake,"* she said. *"I‚Äôm not a princess. I‚Äôm from the cliffs ‚Äî the lower world."* <br><br> The being before her ‚Äî tall, robed in light ‚Äî smiled. *"Memory is fragile between worlds. But your heart remembers. Follow it."* </p> <p> In the days that followed, Lysa wandered the Kingdom Beneath the Clouds, learning its forgotten magic. She could command the wind, speak to storms, and walk across moonlight. But at night, she dreamed of her village ‚Äî her mother‚Äôs laughter, her brother‚Äôs shadow in the rain. And she wondered: if this was home, why did she still long for there? </p> <p> The High Oracle summoned her one morning, revealing the truth. Long ago, the kingdoms of *Earth* and *Aetherion* had been one ‚Äî until humans sealed the sky to stop the wars of magic. To protect balance, a princess was sent below, her memories hidden, her destiny delayed. <br><br> *"You are that princess,"* said the Oracle. *"And the stairway opened because the balance is breaking again."* </p> <p> Lysa stood at the edge of the sky bridge that night, torn between two worlds. If she stayed, she would rule Aetherion. If she returned, she could save her people ‚Äî but lose the magic she‚Äôd just rediscovered. <br><br> The clouds shimmered, whispering both comfort and sorrow. </p> <p> She looked down and saw her village ‚Äî the people building fires, calling out her name. Then she looked up ‚Äî to the kingdom calling her queen. <br><br> Lysa closed her eyes and stepped forward. Into the storm. </p> <p> When she opened them again, she stood on the cliffs once more ‚Äî but the sky above her was no longer silent. Rain fell again for the first time in a hundred days, each drop glowing faintly with light. <br><br> The kingdom above had vanished, but she felt it in her heart ‚Äî like a promise kept. And in the distance, thunder rolled softly, as if bowing to her choice. </p>
<p> <strong>Meaning / Reflection:</strong><br> *The Kingdom Beneath the Clouds* speaks of **belonging, courage, and the duality of the soul** ‚Äî that part of us that yearns for wonder yet is bound by love to the world below. It reminds us that magic isn‚Äôt found in escape but in **returning changed**, carrying a piece of the impossible back to where it‚Äôs most needed. <br><br> Every dreamer who‚Äôs ever looked at the sky and felt ‚Äúsomething calling‚Äù ‚Äî that‚Äôs your Aetherion. And the climb begins the moment you listen. ‚òÅÔ∏è‚ú® </p>
      <p class="end-note">‚Äî End of Story ‚Äî</p>
    </main>

    <nav class="story-navigation">
      <a href="story39.html" class="nav-button prev">‚Üê Previous Story</a>
      <a href="story41.html" class="nav-button next">Next Story ‚Üí</a>
    </nav>
  </article>
<script src="../js/storyFeatures.js"></script>
<style>
    body {
      font-family: 'Noto Nastaliq Urdu', serif;
      margin: 0;
      background: #fff;
    }

    /* Like + Comment Floating Buttons */
    .floating-buttons {
      position: fixed;
      bottom: 22px;
      right: 20px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 12px;
      z-index: 1000;
    }

    .float-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      background: #ffffff;
      color: #111;
      border: 1px solid #ddd;
      border-radius: 50%;
      width: 52px;
      height: 52px;
      font-size: 1.3rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
    }

    .float-btn:hover {
      transform: scale(1.1);
      background: #f5f5f5;
    }

    .float-btn.liked {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      color: white;
      box-shadow: 0 4px 12px rgba(34,197,94,0.4);
    }

    /* Like Count */
    .like-count {
      position: absolute;
      bottom: -18px;
      right: 15px;
      font-size: 0.8rem;
      color: #555;
      font-family: sans-serif;
    }

    /* Comment Popup */
    .comment-popup {
      position: fixed;
      bottom: -100%;
      left: 0;
      width: 100%;
      max-height: 85%;
      background: #fff;
      border-radius: 20px 20px 0 0;
      box-shadow: 0 -6px 20px rgba(0,0,0,0.25);
      padding: 20px;
      z-index: 2000;
      display: flex;
      flex-direction: column;
      transition: bottom 0.4s ease;
    }

    .comment-popup.active {
      bottom: 0;
    }

    .popup-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-family: sans-serif;
      font-weight: 600;
      font-size: 1.1rem;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }

    .close-popup {
      background: none;
      border: none;
      font-size: 1.4rem;
      cursor: pointer;
      color: #666;
    }

    .comments-list {
      flex: 1;
      overflow-y: auto;
      margin-top: 15px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .comment-item {
      background: #f9fafb;
      padding: 10px 14px;
      border-radius: 12px;
      font-family: sans-serif;
      font-size: 0.95rem;
      line-height: 1.4;
      border: 1px solid #eee;
    }

    .comment-item strong {
      display: block;
      margin-bottom: 4px;
      color: #111;
      font-size: 0.95rem;
    }

    .comment-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      border-top: 1px solid #eee;
      padding-top: 10px;
      margin-top: 12px;
    }

    .comment-form input,
    .comment-form textarea {
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 10px;
      font-family: sans-serif;
      font-size: 0.95rem;
      width: 100%;
      resize: none;
      outline: none;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .comment-form input:focus,
    .comment-form textarea:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37,99,235,0.15);
    }

    .comment-form button {
      align-self: flex-start;
      background: linear-gradient(90deg, #2563eb, #1d4ed8);
      color: white;
      border: none;
      border-radius: 40px;
      padding: 8px 22px;
      cursor: pointer;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(37,99,235,0.3);
    }

    .comment-form button:hover {
      transform: scale(1.05);
    }

    .comment-form button.sent {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      box-shadow: 0 4px 10px rgba(34,197,94,0.4);
      cursor: default;
      transform: none;
    }

    /* Scrollbar */
    .comments-list::-webkit-scrollbar {
      width: 6px;
    }
    .comments-list::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 4px;
    }

    /* Responsive */
    @media (max-width: 600px) {
      .float-btn {
        width: 48px;
        height: 48px;
        font-size: 1.2rem;
      }
      .comment-popup {
        padding: 16px;
      }
    }
  </style>
<!-- Floating Like + Comment Buttons -->
  <div class="floating-buttons">
    <div style="position: relative;">
      <button class="float-btn" id="likeBtn">‚ù§Ô∏è</button>
      <span class="like-count" id="likeCount">0</span>
    </div>
    <button class="float-btn" id="commentBtn">üí¨</button>
  </div>

  <!-- Comment Popup -->
  <div class="comment-popup" id="commentPopup">
    <div class="popup-header">
      <span>Comments</span>
      <button class="close-popup" id="closePopup">‚úï</button>
    </div>

    <div class="comments-list" id="commentsList"></div>

    <form class="comment-form" action="https://formspree.io/f/xkgvkele" method="POST" id="commentForm">
      <input type="text" id="name" name="name" placeholder="Your name" required />
      <textarea id="comment" name="comment" placeholder="Write a comment..." required></textarea>
      <button type="submit" id="sendBtn">Send</button>
    </form>
  </div>

<script>
    /* ---------------- LIKE SYSTEM ---------------- */
    const likeBtn = document.getElementById("likeBtn");
    const likeCount = document.getElementById("likeCount");

    const storyKey = location.pathname.split("/").pop();
    const likedKey = `liked_${storyKey}`;
    const countKey = `likeCount_${storyKey}`;

    let liked = localStorage.getItem(likedKey) === "true";
    let count = parseInt(localStorage.getItem(countKey));

    if (isNaN(count)) {
      count = Math.floor(15 + Math.random() * 50);
      localStorage.setItem(countKey, count);
    }

    updateLikeUI();

    likeBtn.addEventListener("click", () => {
      liked = !liked;
      count = liked ? count + 1 : Math.max(0, count - 1);
      localStorage.setItem(likedKey, liked);
      localStorage.setItem(countKey, count);
      updateLikeUI();
    });

    function updateLikeUI() {
      likeBtn.classList.toggle("liked", liked);
      likeCount.textContent = count;
    }

    /* ---------------- COMMENT POPUP ---------------- */
    const commentBtn = document.getElementById("commentBtn");
    const commentPopup = document.getElementById("commentPopup");
    const closePopup = document.getElementById("closePopup");
    const commentsList = document.getElementById("commentsList");
    const commentForm = document.getElementById("commentForm");
    const sendBtn = document.getElementById("sendBtn");

    commentBtn.addEventListener("click", () => {
      commentPopup.classList.add("active");
    });

    closePopup.addEventListener("click", () => {
      commentPopup.classList.remove("active");
    });

    /* Load saved comments */
    const commentsKey = `comments_${storyKey}`;
    let comments = JSON.parse(localStorage.getItem(commentsKey)) || [];
    renderComments();

    function renderComments() {
      commentsList.innerHTML = comments.length
        ? comments.map(c => `<div class="comment-item"><strong>${c.name}</strong>${c.text}</div>`).join("")
        : `<p style="color:#777;font-family:sans-serif;font-size:0.9rem;">No comments yet.</p>`;
    }

    /* Submit comment */
    commentForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const text = document.getElementById("comment").value.trim();
      if (!name || !text) return;

      // Save locally
      comments.push({ name, text });
      localStorage.setItem(commentsKey, JSON.stringify(comments));
      renderComments();

      // Send to Formspree
      const formData = new FormData(commentForm);
      const action = commentForm.getAttribute("action");

      try {
        const res = await fetch(action, { method: "POST", body: formData, headers: { 'Accept': 'application/json' } });
        if (res.ok) {
          sendBtn.textContent = "Sent ‚úÖ";
          sendBtn.classList.add("sent");
          sendBtn.disabled = true;
          commentForm.reset();
          setTimeout(() => {
            sendBtn.textContent = "Send";
            sendBtn.classList.remove("sent");
            sendBtn.disabled = false;
          }, 2000);
        }
      } catch {
        alert("Connection failed. Please try again.");
      }
    });
  </script>
<footer class="site-footer">
  <p>¬© <span id="year"></span> Daily Pixel. All rights reserved.</p>
</footer>

</body>
</html>
