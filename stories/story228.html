<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Falcon of Andalusia</title>
  <link rel="stylesheet" href="../style.css" />
</head>
<body>
  <a class="back-link" href="../index.html">‚Üê Back to Stories</a>
  <article class="story-page">
    <header class="story-header">
      <h1>The Falcon of Andalusia</h1>
      <p class="meta">May 12, 2025 ‚Ä¢ By Idris Al-Rami</p>
      <div class="tags">
        <span class="tag">loyalty</span>
        <span class="tag">courage</span>
        <span class="tag">legacy</span>
      </div>
      <img class="featured-image" src="https://images.unsplash.com/photo-1556855779-4031fe31598f?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTh8fEElMjBnb2xkZW4lMjBmYWxjb24lMjBwZXJjaGVkJTIwb24lMjB0aGUlMjBnbG92ZWQlMjBoYW5kJTIwb2YlMjBhJTIwa25pZ2h0JTIwaW4lMjB3b3JuJTIwYXJtb3IlMkMlMjB0aGUlMjBzdW4lMjBzZXR0aW5nJTIwb3ZlciUyMHRoZSUyMGRvbWVzJTIwYW5kJTIwZ2FyZGVucyUyMG9mJTIwb2xkJTIwQW5kYWx1c2lhLnxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&q=60&w=500" alt="A golden falcon perched on the gloved hand of a knight in worn armor, the sun setting over the domes and gardens of old Andalusia.">
    </header>

    <main class="story-content">
      <p>The year was 1491, and the kingdom of Granada stood on the edge of ruin. The banners of Castile flew closer every day, and the once-proud palaces of Alhambra whispered with fear. Among the servants and soldiers lived a young falconer named Zayd ibn Tariq ‚Äî a boy of no noble blood, but of steady hand and unshakable heart.</p>

<p>Every morning, he would climb the crimson towers before dawn to train his falcon, Sirocco. Together they soared over the misted orchards and marble courtyards, their shadows gliding across the sleeping city. The bird was swift and fierce, a gift from the Sultan himself, and Zayd treated it not as a beast, but as a brother.</p>

<p>One evening, as the palace burned with the glow of sunset, the Sultan summoned him in secret. The old ruler‚Äôs eyes were weary, his beard silver like moonlight.</p>

<p>‚ÄúZayd,‚Äù he said softly, ‚Äúour city will fall before winter. But there is something that must not fall with it.‚Äù</p>

<p>He drew from his robe a small, sealed cylinder of bronze. ‚ÄúInside lies the map to the last refuge of our people ‚Äî the Library of Zahra. It holds the writings of our ancestors, the wisdom of centuries. You must deliver it to the scholars of Fez. If the Christians find it, our light will vanish forever.‚Äù</p>

<p>Zayd bowed low, heart pounding. ‚ÄúI will guard it with my life.‚Äù</p>

<p>Before dawn, disguised as a trader, he slipped from the city gates. The roads to Fez were treacherous ‚Äî filled with patrols, thieves, and worse, those who would sell anything for gold. Sirocco flew ahead as his eyes and protector. For days they crossed mountains and rivers, their food scarce, their sleep restless.</p>

<p>But on the seventh night, near the river Genil, he was ambushed. A band of soldiers surrounded him, torches blazing. ‚ÄúHalt!‚Äù their captain shouted. ‚ÄúYou carry the Sultan‚Äôs secret!‚Äù</p>

<p>Zayd turned to run, but an arrow struck the ground beside him. He loosed Sirocco with a sharp cry. The falcon rose like a streak of gold and struck the captain‚Äôs face, blinding him. In the chaos, Zayd leapt into the river‚Äôs current. The bronze cylinder slipped from his belt, sinking into the dark.</p>

<p>He dove after it, lungs burning, fingers brushing the cold metal. But the current was too strong. When he surfaced, gasping, he was alone. The soldiers searched the banks but found only his cloak. They left, certain he had drowned.</p>

<p>By morning, Zayd crawled from the reeds, battered but alive. His falcon perched nearby, soaked and shivering ‚Äî and in its claws, gleamed the bronze cylinder.</p>

<p>‚ÄúYou saved it,‚Äù he whispered, tears mixing with river water. ‚ÄúYou saved our light.‚Äù</p>

<p>Weeks later, he reached Fez under moonlight. The scholars took the map and hid it deep within their archives, far from kings and conquerors. Zayd never returned to Granada, but he lived to hear that his home had fallen ‚Äî and yet, the knowledge of his people endured.</p>

<p>When he died, Sirocco was seen circling above his grave three times before flying toward the horizon, never to be seen again. Some say the falcon still guards the lost library, waiting for a world wise enough to open its doors once more.</p>

<hr>

<p><strong>Meaning / Reflection:</strong><br>
<em>The Falcon of Andalusia</em> is a story about loyalty, courage, and the power of knowledge that outlives empires. It reminds us that the truest legacies are not written in stone or gold ‚Äî but in the words and wisdom we fight to preserve. üïäÔ∏èüìú</p>


      <p class="end-note">‚Äî End of Story ‚Äî</p>
    </main>

    <nav class="story-navigation">
      <a href="story227.html" class="nav-button prev">‚Üê Previous Story</a>
      <a href="story229.html" class="nav-button next">Next Story ‚Üí</a>
    </nav>
  </article>
<script src="../js/storyFeatures.js"></script>
<style>
    body {
      font-family: 'Noto Nastaliq Urdu', serif;
      margin: 0;
      background: #fff;
    }

    /* Like + Comment Floating Buttons */
    .floating-buttons {
      position: fixed;
      bottom: 22px;
      right: 20px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 12px;
      z-index: 1000;
    }

    .float-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      background: #ffffff;
      color: #111;
      border: 1px solid #ddd;
      border-radius: 50%;
      width: 52px;
      height: 52px;
      font-size: 1.3rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
    }

    .float-btn:hover {
      transform: scale(1.1);
      background: #f5f5f5;
    }

    .float-btn.liked {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      color: white;
      box-shadow: 0 4px 12px rgba(34,197,94,0.4);
    }

    /* Like Count */
    .like-count {
      position: absolute;
      bottom: -18px;
      right: 15px;
      font-size: 0.8rem;
      color: #555;
      font-family: sans-serif;
    }

    /* Comment Popup */
    .comment-popup {
      position: fixed;
      bottom: -100%;
      left: 0;
      width: 100%;
      max-height: 85%;
      background: #fff;
      border-radius: 20px 20px 0 0;
      box-shadow: 0 -6px 20px rgba(0,0,0,0.25);
      padding: 20px;
      z-index: 2000;
      display: flex;
      flex-direction: column;
      transition: bottom 0.4s ease;
    }

    .comment-popup.active {
      bottom: 0;
    }

    .popup-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-family: sans-serif;
      font-weight: 600;
      font-size: 1.1rem;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }

    .close-popup {
      background: none;
      border: none;
      font-size: 1.4rem;
      cursor: pointer;
      color: #666;
    }

    .comments-list {
      flex: 1;
      overflow-y: auto;
      margin-top: 15px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .comment-item {
      background: #f9fafb;
      padding: 10px 14px;
      border-radius: 12px;
      font-family: sans-serif;
      font-size: 0.95rem;
      line-height: 1.4;
      border: 1px solid #eee;
    }

    .comment-item strong {
      display: block;
      margin-bottom: 4px;
      color: #111;
      font-size: 0.95rem;
    }

    .comment-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      border-top: 1px solid #eee;
      padding-top: 10px;
      margin-top: 12px;
    }

    .comment-form input,
    .comment-form textarea {
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 10px;
      font-family: sans-serif;
      font-size: 0.95rem;
      width: 100%;
      resize: none;
      outline: none;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .comment-form input:focus,
    .comment-form textarea:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37,99,235,0.15);
    }

    .comment-form button {
      align-self: flex-start;
      background: linear-gradient(90deg, #2563eb, #1d4ed8);
      color: white;
      border: none;
      border-radius: 40px;
      padding: 8px 22px;
      cursor: pointer;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(37,99,235,0.3);
    }

    .comment-form button:hover {
      transform: scale(1.05);
    }

    .comment-form button.sent {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      box-shadow: 0 4px 10px rgba(34,197,94,0.4);
      cursor: default;
      transform: none;
    }

    /* Scrollbar */
    .comments-list::-webkit-scrollbar {
      width: 6px;
    }
    .comments-list::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 4px;
    }

    /* Responsive */
    @media (max-width: 600px) {
      .float-btn {
        width: 48px;
        height: 48px;
        font-size: 1.2rem;
      }
      .comment-popup {
        padding: 16px;
      }
    }
  </style>
<!-- Floating Like + Comment Buttons -->
  <div class="floating-buttons">
    <div style="position: relative;">
      <button class="float-btn" id="likeBtn">‚ù§Ô∏è</button>
      <span class="like-count" id="likeCount">0</span>
    </div>
    <button class="float-btn" id="commentBtn">üí¨</button>
  </div>

  <!-- Comment Popup -->
  <div class="comment-popup" id="commentPopup">
    <div class="popup-header">
      <span>Comments</span>
      <button class="close-popup" id="closePopup">‚úï</button>
    </div>

    <div class="comments-list" id="commentsList"></div>

    <form class="comment-form" action="https://formspree.io/f/xkgvkele" method="POST" id="commentForm">
      <input type="text" id="name" name="name" placeholder="Your name" required />
      <textarea id="comment" name="comment" placeholder="Write a comment..." required></textarea>
      <button type="submit" id="sendBtn">Send</button>
    </form>
  </div>

<script>
    /* ---------------- LIKE SYSTEM ---------------- */
    const likeBtn = document.getElementById("likeBtn");
    const likeCount = document.getElementById("likeCount");

    const storyKey = location.pathname.split("/").pop();
    const likedKey = `liked_${storyKey}`;
    const countKey = `likeCount_${storyKey}`;

    let liked = localStorage.getItem(likedKey) === "true";
    let count = parseInt(localStorage.getItem(countKey));

    if (isNaN(count)) {
      count = Math.floor(15 + Math.random() * 50);
      localStorage.setItem(countKey, count);
    }

    updateLikeUI();

    likeBtn.addEventListener("click", () => {
      liked = !liked;
      count = liked ? count + 1 : Math.max(0, count - 1);
      localStorage.setItem(likedKey, liked);
      localStorage.setItem(countKey, count);
      updateLikeUI();
    });

    function updateLikeUI() {
      likeBtn.classList.toggle("liked", liked);
      likeCount.textContent = count;
    }

    /* ---------------- COMMENT POPUP ---------------- */
    const commentBtn = document.getElementById("commentBtn");
    const commentPopup = document.getElementById("commentPopup");
    const closePopup = document.getElementById("closePopup");
    const commentsList = document.getElementById("commentsList");
    const commentForm = document.getElementById("commentForm");
    const sendBtn = document.getElementById("sendBtn");

    commentBtn.addEventListener("click", () => {
      commentPopup.classList.add("active");
    });

    closePopup.addEventListener("click", () => {
      commentPopup.classList.remove("active");
    });

    /* Load saved comments */
    const commentsKey = `comments_${storyKey}`;
    let comments = JSON.parse(localStorage.getItem(commentsKey)) || [];
    renderComments();

    function renderComments() {
      commentsList.innerHTML = comments.length
        ? comments.map(c => `<div class="comment-item"><strong>${c.name}</strong>${c.text}</div>`).join("")
        : `<p style="color:#777;font-family:sans-serif;font-size:0.9rem;">No comments yet.</p>`;
    }

    /* Submit comment */
    commentForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const text = document.getElementById("comment").value.trim();
      if (!name || !text) return;

      // Save locally
      comments.push({ name, text });
      localStorage.setItem(commentsKey, JSON.stringify(comments));
      renderComments();

      // Send to Formspree
      const formData = new FormData(commentForm);
      const action = commentForm.getAttribute("action");

      try {
        const res = await fetch(action, { method: "POST", body: formData, headers: { 'Accept': 'application/json' } });
        if (res.ok) {
          sendBtn.textContent = "Sent ‚úÖ";
          sendBtn.classList.add("sent");
          sendBtn.disabled = true;
          commentForm.reset();
          setTimeout(() => {
            sendBtn.textContent = "Send";
            sendBtn.classList.remove("sent");
            sendBtn.disabled = false;
          }, 2000);
        }
      } catch {
        alert("Connection failed. Please try again.");
      }
    });
  </script>
<footer class="site-footer">
  <p>¬© <span id="year"></span> Daily Pixel. All rights reserved.</p>
</footer>

</body>
</html>
