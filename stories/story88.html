<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Weaver of Shadows</title>
  <link rel="stylesheet" href="../style.css" />
</head>
<body>
  <a class="back-link" href="../index.html">‚Üê Back to Stories</a>
  <article class="story-page">
    <header class="story-header">
      <h1>The Weaver of Shadows</h1>
      <p class="meta">October 4, 2025 ‚Ä¢ Grace Thompson</p>
      <div class="tags">
        <span class="tag">destiny</span>
        <span class="tag">magic</span>
        <span class="tag">courage</span>
        <span class="tag">sacrifice</span>
      </div>
      <img class="featured-image" src="https://plus.unsplash.com/premium_photo-1678231841210-a6df5221d309?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8QSUyMHZhc3QlMjBtb29ubGl0JTIwaGFsbCUyMGZpbGxlZCUyMHdpdGglMjBzaWx2ZXIlMjB0aHJlYWRzJTIwaGFuZ2luZyUyMGZyb20lMjB0aGUlMjBjZWlsaW5nJTJDJTIwZWFjaCUyMGdsb3dpbmclMjBmYWludGx5JTIwd2l0aCUyMHNjZW5lcyUyMGZyb20lMjBkaWZmZXJlbnQlMjBsaXZlcy58ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&q=60&w=500" alt="A vast moonlit hall filled with silver threads hanging from the ceiling, each glowing faintly with scenes from different lives.">
    </header>

    <main class="story-content">
     <p> The Kingdom of Miravale was built upon stories ‚Äî not told, but woven. Beneath its marble towers stood the <em>Hall of Threads</em>, where the <strong>Weavers of Shadows</strong> crafted every soul‚Äôs destiny from strands of light and night. It was said that each life began as a single silver thread on the Loom of Time, guided by unseen hands. </p> <p> For centuries, no one had questioned the Weavers ‚Äî until <em>Lyra</em> arrived. She was a young orphan, raised among the threads, chosen to become an apprentice at the age of twelve. Her eyes glowed faintly in the dark ‚Äî a mark that she could see the hidden colors within fate. While other weavers followed patterns given by the elders, Lyra often hesitated before cutting a thread. She felt the pulse behind it ‚Äî the heartbeat of a life still unfolding. </p> <p> One night, as the moon cast silver light through the Hall‚Äôs crystal windows, Lyra noticed a thread unlike any other. It shimmered with both gold and black, twisting in conflict. When she touched it, visions flooded her ‚Äî of a boy standing on a burning field, holding a blade of flame, surrounded by shadows whispering her name. </p> <p> ‚ÄúThat thread belongs to the next king,‚Äù said her master, <em>Seran</em>, appearing behind her. ‚ÄúDo not touch it again.‚Äù </p> <p> But Lyra couldn‚Äôt forget the vision. Days later, when she returned, the thread had begun to fray ‚Äî something impossible. Destiny was unraveling itself. Ignoring every law of the Weavers, she traced the thread‚Äôs path through the Loom and found something terrifying: thousands of threads connected to it, bound by one shared fate ‚Äî destruction. </p> <p> Realizing the truth, Lyra raced to the surface world. There she found the boy from her vision ‚Äî <em>Kael</em>, a soldier‚Äôs son destined to become king through a war that would burn the realm to ash. But Kael was no tyrant yet; he was kind, uncertain, human. She understood then that fate was not prophecy ‚Äî it was design. And designs could be changed. </p> <p> ‚ÄúIf I cut your thread,‚Äù she said softly, ‚Äúthe world will forget you. But if I leave it, everything ends.‚Äù </p> <p> Kael met her eyes. ‚ÄúThen let the world forget me, as long as it remembers peace.‚Äù </p> <p> With trembling hands, Lyra returned to the Loom. As the other Weavers watched in horror, she took the golden-black thread and severed it. A scream echoed across the Hall ‚Äî not of pain, but of release. The Loom blazed white, then darkened. Thousands of fates rewrote themselves in silence. </p> <p> When the light faded, the Hall stood empty. The Weavers were gone. Only Lyra remained, her hands glowing faintly, surrounded by loose threads drifting in the air. The Loom had chosen her as its new keeper ‚Äî not to weave destiny, but to guard its freedom. </p> <p> Centuries later, travelers spoke of a woman in silver robes wandering the edges of dreams, mending hearts, not lives. They called her *The Weaver of Shadows* ‚Äî the one who gave mortals the right to choose. </p> <p><strong>Meaning / Reflection:</strong><br> *The Weaver of Shadows* is a tale about defiance and compassion ‚Äî the courage to question the patterns others accept as unchangeable. It reminds us that destiny is not a prison, and fate is not fixed. Every life holds the thread of choice, and even the smallest act of mercy can rewrite the fabric of the world. üåôü™° </p>

      <p class="end-note">‚Äî End of Story ‚Äî</p>
    </main>

    <nav class="story-navigation">
      <a href="story87.html" class="nav-button prev">‚Üê Previous Story</a>
      <a href="story89.html" class="nav-button next">Next Story ‚Üí</a>
    </nav>
  </article>
<script src="../js/storyFeatures.js"></script>
<style>
    body {
      font-family: 'Noto Nastaliq Urdu', serif;
      margin: 0;
      background: #fff;
    }

    /* Like + Comment Floating Buttons */
    .floating-buttons {
      position: fixed;
      bottom: 22px;
      right: 20px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 12px;
      z-index: 1000;
    }

    .float-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      background: #ffffff;
      color: #111;
      border: 1px solid #ddd;
      border-radius: 50%;
      width: 52px;
      height: 52px;
      font-size: 1.3rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
    }

    .float-btn:hover {
      transform: scale(1.1);
      background: #f5f5f5;
    }

    .float-btn.liked {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      color: white;
      box-shadow: 0 4px 12px rgba(34,197,94,0.4);
    }

    /* Like Count */
    .like-count {
      position: absolute;
      bottom: -18px;
      right: 15px;
      font-size: 0.8rem;
      color: #555;
      font-family: sans-serif;
    }

    /* Comment Popup */
    .comment-popup {
      position: fixed;
      bottom: -100%;
      left: 0;
      width: 100%;
      max-height: 85%;
      background: #fff;
      border-radius: 20px 20px 0 0;
      box-shadow: 0 -6px 20px rgba(0,0,0,0.25);
      padding: 20px;
      z-index: 2000;
      display: flex;
      flex-direction: column;
      transition: bottom 0.4s ease;
    }

    .comment-popup.active {
      bottom: 0;
    }

    .popup-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-family: sans-serif;
      font-weight: 600;
      font-size: 1.1rem;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }

    .close-popup {
      background: none;
      border: none;
      font-size: 1.4rem;
      cursor: pointer;
      color: #666;
    }

    .comments-list {
      flex: 1;
      overflow-y: auto;
      margin-top: 15px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .comment-item {
      background: #f9fafb;
      padding: 10px 14px;
      border-radius: 12px;
      font-family: sans-serif;
      font-size: 0.95rem;
      line-height: 1.4;
      border: 1px solid #eee;
    }

    .comment-item strong {
      display: block;
      margin-bottom: 4px;
      color: #111;
      font-size: 0.95rem;
    }

    .comment-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      border-top: 1px solid #eee;
      padding-top: 10px;
      margin-top: 12px;
    }

    .comment-form input,
    .comment-form textarea {
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 10px;
      font-family: sans-serif;
      font-size: 0.95rem;
      width: 100%;
      resize: none;
      outline: none;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .comment-form input:focus,
    .comment-form textarea:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37,99,235,0.15);
    }

    .comment-form button {
      align-self: flex-start;
      background: linear-gradient(90deg, #2563eb, #1d4ed8);
      color: white;
      border: none;
      border-radius: 40px;
      padding: 8px 22px;
      cursor: pointer;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(37,99,235,0.3);
    }

    .comment-form button:hover {
      transform: scale(1.05);
    }

    .comment-form button.sent {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      box-shadow: 0 4px 10px rgba(34,197,94,0.4);
      cursor: default;
      transform: none;
    }

    /* Scrollbar */
    .comments-list::-webkit-scrollbar {
      width: 6px;
    }
    .comments-list::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 4px;
    }

    /* Responsive */
    @media (max-width: 600px) {
      .float-btn {
        width: 48px;
        height: 48px;
        font-size: 1.2rem;
      }
      .comment-popup {
        padding: 16px;
      }
    }
  </style>
<!-- Floating Like + Comment Buttons -->
  <div class="floating-buttons">
    <div style="position: relative;">
      <button class="float-btn" id="likeBtn">‚ù§Ô∏è</button>
      <span class="like-count" id="likeCount">0</span>
    </div>
    <button class="float-btn" id="commentBtn">üí¨</button>
  </div>

  <!-- Comment Popup -->
  <div class="comment-popup" id="commentPopup">
    <div class="popup-header">
      <span>Comments</span>
      <button class="close-popup" id="closePopup">‚úï</button>
    </div>

    <div class="comments-list" id="commentsList"></div>

    <form class="comment-form" action="https://formspree.io/f/xkgvkele" method="POST" id="commentForm">
      <input type="text" id="name" name="name" placeholder="Your name" required />
      <textarea id="comment" name="comment" placeholder="Write a comment..." required></textarea>
      <button type="submit" id="sendBtn">Send</button>
    </form>
  </div>

<script>
    /* ---------------- LIKE SYSTEM ---------------- */
    const likeBtn = document.getElementById("likeBtn");
    const likeCount = document.getElementById("likeCount");

    const storyKey = location.pathname.split("/").pop();
    const likedKey = `liked_${storyKey}`;
    const countKey = `likeCount_${storyKey}`;

    let liked = localStorage.getItem(likedKey) === "true";
    let count = parseInt(localStorage.getItem(countKey));

    if (isNaN(count)) {
      count = Math.floor(15 + Math.random() * 50);
      localStorage.setItem(countKey, count);
    }

    updateLikeUI();

    likeBtn.addEventListener("click", () => {
      liked = !liked;
      count = liked ? count + 1 : Math.max(0, count - 1);
      localStorage.setItem(likedKey, liked);
      localStorage.setItem(countKey, count);
      updateLikeUI();
    });

    function updateLikeUI() {
      likeBtn.classList.toggle("liked", liked);
      likeCount.textContent = count;
    }

    /* ---------------- COMMENT POPUP ---------------- */
    const commentBtn = document.getElementById("commentBtn");
    const commentPopup = document.getElementById("commentPopup");
    const closePopup = document.getElementById("closePopup");
    const commentsList = document.getElementById("commentsList");
    const commentForm = document.getElementById("commentForm");
    const sendBtn = document.getElementById("sendBtn");

    commentBtn.addEventListener("click", () => {
      commentPopup.classList.add("active");
    });

    closePopup.addEventListener("click", () => {
      commentPopup.classList.remove("active");
    });

    /* Load saved comments */
    const commentsKey = `comments_${storyKey}`;
    let comments = JSON.parse(localStorage.getItem(commentsKey)) || [];
    renderComments();

    function renderComments() {
      commentsList.innerHTML = comments.length
        ? comments.map(c => `<div class="comment-item"><strong>${c.name}</strong>${c.text}</div>`).join("")
        : `<p style="color:#777;font-family:sans-serif;font-size:0.9rem;">No comments yet.</p>`;
    }

    /* Submit comment */
    commentForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const text = document.getElementById("comment").value.trim();
      if (!name || !text) return;

      // Save locally
      comments.push({ name, text });
      localStorage.setItem(commentsKey, JSON.stringify(comments));
      renderComments();

      // Send to Formspree
      const formData = new FormData(commentForm);
      const action = commentForm.getAttribute("action");

      try {
        const res = await fetch(action, { method: "POST", body: formData, headers: { 'Accept': 'application/json' } });
        if (res.ok) {
          sendBtn.textContent = "Sent ‚úÖ";
          sendBtn.classList.add("sent");
          sendBtn.disabled = true;
          commentForm.reset();
          setTimeout(() => {
            sendBtn.textContent = "Send";
            sendBtn.classList.remove("sent");
            sendBtn.disabled = false;
          }, 2000);
        }
      } catch {
        alert("Connection failed. Please try again.");
      }
    });
  </script>
<footer class="site-footer">
  <p>¬© <span id="year"></span> Daily Pixel. All rights reserved.</p>
</footer>

</body>
</html>
