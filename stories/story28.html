<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Letters Beneath the Willow</title>
  <link rel="stylesheet" href="../style.css" />
</head>
<body>
  <a class="back-link" href="../index.html">‚Üê Back to Stories</a>
  <article class="story-page">
    <header class="story-header">
      <h1>The Letters Beneath the Willow</h1>
      <p class="meta">March 10, 2025 ‚Ä¢ By Amara Hale</p>
      <div class="tags">
        <span class="tag">lost love</span>
        <span class="tag">letters</span>
        <span class="tag">time</span>
      </div>
      <img 
        class="featured-image" 
        src="https://media.istockphoto.com/id/1211994143/photo/3d-rendering-of-a-beech-tree-next-to-a-wooden-bench-at-high-green-hill-in-the-evening-sunset.webp?a=1&b=1&s=612x612&w=0&k=20&c=AP9o4N3JZY7bl3ZTR44W3L7djYFw0OlHaCfTaVhcCcY=" 
        alt="A quiet countryside meadow beneath a pale sunrise ‚Äî an old willow tree beside a worn wooden bench, petals drifting like whispers of forgotten goodbyes.">
    </header>

    <main class="story-content">
      <p> The willow still stood where the river curved, its roots gripping the earth as if refusing to let go. Beneath it, the bench remained ‚Äî faded, creaking softly when the wind brushed past. And there, like every year, <em>Daniel</em> came with his small bundle of letters. </p> <p> He always wore the same brown coat, the one she ‚Äî <em>Elara</em> ‚Äî had mended for him the summer before she left. The coat had aged, but her stitching held strong, delicate and sure, just like her. </p> <p> It had been fifteen years since she vanished. Not suddenly, but quietly, like dusk folding into night. No fights, no goodbyes ‚Äî only a note left under the teapot: <em>‚ÄúI‚Äôll write, when I find the right words.‚Äù</em> </p> <p> And she did. One letter each year, arriving on the first day of spring. No return address. No explanation. Just pages filled with fragments ‚Äî moments of faraway sunsets, cities he‚Äôd never see, and lines that read like unfinished poems. </p> <p> Daniel never stopped replying, though his letters had nowhere to go. He placed them in a small tin box beneath the willow ‚Äî the same spot they‚Äôd once buried their childhood treasures. </p> <p> ‚ÄúIf you ever find your way back,‚Äù he‚Äôd write, ‚Äúyou‚Äôll find me here ‚Äî still reading, still listening.‚Äù </p> <p> On the fifteenth spring, the postman brought no letter. Just silence. Daniel waited anyway. He sat under the willow till the sun bled into gold, reading the old letters one by one, his fingers tracing every curve of her handwriting. </p> <p> The last one had ended differently. Not with <em>‚ÄòYours, Elara‚Äô</em>, but with a line that seemed to tremble off the page: <br> <em>‚ÄúIf I never make it back ‚Äî read this where it all began.‚Äù</em> </p> <p> Daniel looked around ‚Äî the same place, the same light through the branches. He dug beneath the roots, where their tin box once rested. But this time, he found something else ‚Äî a sealed envelope, brittle with age, his name still clear. </p> <p> He opened it slowly. Inside, a single pressed petal and a note in her hand: <br> <em>‚ÄúBy the time you read this, I‚Äôll be part of the river, the wind, the willow. You waited ‚Äî and that was love enough.‚Äù</em> </p> <p> That evening, as dusk settled, a light breeze moved through the willow‚Äôs branches. Daniel closed his eyes and smiled. He didn‚Äôt cry this time. He just whispered, ‚ÄúI got your last letter, Elara.‚Äù </p> <p> When the morning came, the bench was empty ‚Äî only the tin box remained, open to the sunlight, and inside it, two letters resting together. </p> <p> <strong>Meaning / Reflection:</strong><br> <em>The Letters Beneath the Willow</em> speaks to love that doesn‚Äôt end ‚Äî it changes form, becoming memory, wind, and silence. It reminds us that sometimes, the greatest promises are not spoken aloud but kept quietly in the places where we still wait, still remember, and still hope. üåøüíå </p>

      <p class="end-note">‚Äî End of Story ‚Äî</p>
    </main>

    <nav class="story-navigation">
      <a href="story27.html" class="nav-button prev">‚Üê Previous Story</a>
      <a href="story29.html" class="nav-button next">Next Story ‚Üí</a>
    </nav>
  </article>
  <style>
    body {
      font-family: 'Noto Nastaliq Urdu', serif;
      margin: 0;
      background: #fff;
    }

    /* Like + Comment Floating Buttons */
    .floating-buttons {
      position: fixed;
      bottom: 22px;
      right: 20px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 12px;
      z-index: 1000;
    }

    .float-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      background: #ffffff;
      color: #111;
      border: 1px solid #ddd;
      border-radius: 50%;
      width: 52px;
      height: 52px;
      font-size: 1.3rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
    }

    .float-btn:hover {
      transform: scale(1.1);
      background: #f5f5f5;
    }

    .float-btn.liked {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      color: white;
      box-shadow: 0 4px 12px rgba(34,197,94,0.4);
    }

    /* Like Count */
    .like-count {
      position: absolute;
      bottom: -18px;
      right: 15px;
      font-size: 0.8rem;
      color: #555;
      font-family: sans-serif;
    }

    /* Comment Popup */
    .comment-popup {
      position: fixed;
      bottom: -100%;
      left: 0;
      width: 100%;
      max-height: 85%;
      background: #fff;
      border-radius: 20px 20px 0 0;
      box-shadow: 0 -6px 20px rgba(0,0,0,0.25);
      padding: 20px;
      z-index: 2000;
      display: flex;
      flex-direction: column;
      transition: bottom 0.4s ease;
    }

    .comment-popup.active {
      bottom: 0;
    }

    .popup-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-family: sans-serif;
      font-weight: 600;
      font-size: 1.1rem;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }

    .close-popup {
      background: none;
      border: none;
      font-size: 1.4rem;
      cursor: pointer;
      color: #666;
    }

    .comments-list {
      flex: 1;
      overflow-y: auto;
      margin-top: 15px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .comment-item {
      background: #f9fafb;
      padding: 10px 14px;
      border-radius: 12px;
      font-family: sans-serif;
      font-size: 0.95rem;
      line-height: 1.4;
      border: 1px solid #eee;
    }

    .comment-item strong {
      display: block;
      margin-bottom: 4px;
      color: #111;
      font-size: 0.95rem;
    }

    .comment-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      border-top: 1px solid #eee;
      padding-top: 10px;
      margin-top: 12px;
    }

    .comment-form input,
    .comment-form textarea {
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 10px;
      font-family: sans-serif;
      font-size: 0.95rem;
      width: 100%;
      resize: none;
      outline: none;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .comment-form input:focus,
    .comment-form textarea:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37,99,235,0.15);
    }

    .comment-form button {
      align-self: flex-start;
      background: linear-gradient(90deg, #2563eb, #1d4ed8);
      color: white;
      border: none;
      border-radius: 40px;
      padding: 8px 22px;
      cursor: pointer;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(37,99,235,0.3);
    }

    .comment-form button:hover {
      transform: scale(1.05);
    }

    .comment-form button.sent {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      box-shadow: 0 4px 10px rgba(34,197,94,0.4);
      cursor: default;
      transform: none;
    }

    /* Scrollbar */
    .comments-list::-webkit-scrollbar {
      width: 6px;
    }
    .comments-list::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 4px;
    }

    /* Responsive */
    @media (max-width: 600px) {
      .float-btn {
        width: 48px;
        height: 48px;
        font-size: 1.2rem;
      }
      .comment-popup {
        padding: 16px;
      }
    }
  </style>
<!-- Floating Like + Comment Buttons -->
  <div class="floating-buttons">
    <div style="position: relative;">
      <button class="float-btn" id="likeBtn">‚ù§Ô∏è</button>
      <span class="like-count" id="likeCount">0</span>
    </div>
    <button class="float-btn" id="commentBtn">üí¨</button>
  </div>

  <!-- Comment Popup -->
  <div class="comment-popup" id="commentPopup">
    <div class="popup-header">
      <span>Comments</span>
      <button class="close-popup" id="closePopup">‚úï</button>
    </div>

    <div class="comments-list" id="commentsList"></div>

    <form class="comment-form" action="https://formspree.io/f/xkgvkele" method="POST" id="commentForm">
      <input type="text" id="name" name="name" placeholder="Your name" required />
      <textarea id="comment" name="comment" placeholder="Write a comment..." required></textarea>
      <button type="submit" id="sendBtn">Send</button>
    </form>
  </div>

<script>
    /* ---------------- LIKE SYSTEM ---------------- */
    const likeBtn = document.getElementById("likeBtn");
    const likeCount = document.getElementById("likeCount");

    const storyKey = location.pathname.split("/").pop();
    const likedKey = `liked_${storyKey}`;
    const countKey = `likeCount_${storyKey}`;

    let liked = localStorage.getItem(likedKey) === "true";
    let count = parseInt(localStorage.getItem(countKey));

    if (isNaN(count)) {
      count = Math.floor(15 + Math.random() * 50);
      localStorage.setItem(countKey, count);
    }

    updateLikeUI();

    likeBtn.addEventListener("click", () => {
      liked = !liked;
      count = liked ? count + 1 : Math.max(0, count - 1);
      localStorage.setItem(likedKey, liked);
      localStorage.setItem(countKey, count);
      updateLikeUI();
    });

    function updateLikeUI() {
      likeBtn.classList.toggle("liked", liked);
      likeCount.textContent = count;
    }

    /* ---------------- COMMENT POPUP ---------------- */
    const commentBtn = document.getElementById("commentBtn");
    const commentPopup = document.getElementById("commentPopup");
    const closePopup = document.getElementById("closePopup");
    const commentsList = document.getElementById("commentsList");
    const commentForm = document.getElementById("commentForm");
    const sendBtn = document.getElementById("sendBtn");

    commentBtn.addEventListener("click", () => {
      commentPopup.classList.add("active");
    });

    closePopup.addEventListener("click", () => {
      commentPopup.classList.remove("active");
    });

    /* Load saved comments */
    const commentsKey = `comments_${storyKey}`;
    let comments = JSON.parse(localStorage.getItem(commentsKey)) || [];
    renderComments();

    function renderComments() {
      commentsList.innerHTML = comments.length
        ? comments.map(c => `<div class="comment-item"><strong>${c.name}</strong>${c.text}</div>`).join("")
        : `<p style="color:#777;font-family:sans-serif;font-size:0.9rem;">No comments yet.</p>`;
    }

    /* Submit comment */
    commentForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const text = document.getElementById("comment").value.trim();
      if (!name || !text) return;

      // Save locally
      comments.push({ name, text });
      localStorage.setItem(commentsKey, JSON.stringify(comments));
      renderComments();

      // Send to Formspree
      const formData = new FormData(commentForm);
      const action = commentForm.getAttribute("action");

      try {
        const res = await fetch(action, { method: "POST", body: formData, headers: { 'Accept': 'application/json' } });
        if (res.ok) {
          sendBtn.textContent = "Sent ‚úÖ";
          sendBtn.classList.add("sent");
          sendBtn.disabled = true;
          commentForm.reset();
          setTimeout(() => {
            sendBtn.textContent = "Send";
            sendBtn.classList.remove("sent");
            sendBtn.disabled = false;
          }, 2000);
        }
      } catch {
        alert("Connection failed. Please try again.");
      }
    });
  </script>
<script src="../js/storyFeatures.js"></script>

<footer class="site-footer">
  <p>¬© <span id="year"></span> Daily Pixel. All rights reserved.</p>
</footer>

</body>
</html>
