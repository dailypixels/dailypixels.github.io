<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Chrono Key</title>
  <link rel="stylesheet" href="../style.css" />
</head>
<body>
  <a class="back-link" href="../index.html">‚Üê Back to Stories</a>
  <article class="story-page">
    <header class="story-header">
      <h1>The Chrono Key</h1>
      <p class="meta">September 20, 2025 ‚Ä¢ By Mira Solen</p>
      <div class="tags">
        <span class="tag">time travel</span>
        <span class="tag">destiny</span>
        <span class="tag">memory</span>
      </div>
      <img class="featured-image" src="https://plus.unsplash.com/premium_photo-1700830328318-9a79d6d76e6d?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTd8fEElMjBnbG93aW5nJTIwbWVjaGFuaWNhbCUyMGtleSUyMHN1c3BlbmRlZCUyMGluJTIwbWlkLWFpciUyQyUyMHN1cnJvdW5kZWQlMjBieSUyMHN3aXJsaW5nJTIwYmx1ZSUyMHRpbWUlMjBlbmVyZ3kufGVufDB8fDB8fHww&auto=format&fit=crop&q=60&w=500" alt="A glowing mechanical key suspended in mid-air, surrounded by swirling blue time energy.">
    </header>

    <main class="story-content">
     <p>Dr. Elara Finch never believed in fate ‚Äî only equations, precision, and proof. For ten years, she had devoted her life to the Temporal Mechanics Division, developing what no one else dared attempt: a way to *reopen* specific points in time without rewriting history.</p>

<p>Her invention, the <em>Chrono Key</em>, pulsed on the lab table like a living heart ‚Äî metallic veins glowing blue, its hum in rhythm with her pulse. It could open doors to the past for exactly sixty seconds. But she had promised herself she‚Äôd never use it for personal reasons.</p>

<p>Then came the accident.</p>

<p>Her partner, Isaac, had died in a containment breach ‚Äî one she caused. One miscalculated sequence, one second too late, and he was gone. And no formula could bring him back.</p>

<hr>

<p>Months later, she stood before the machine again, trembling. ‚ÄúJust once,‚Äù she whispered. ‚ÄúOne minute.‚Äù</p>

<p>The Key activated with a low chime. Space shimmered. Reality bent. A doorway of light unfolded before her ‚Äî and she stepped through.</p>

<p>She was back in the lab, moments before the explosion. She could see Isaac on the other side of the glass, smiling as he calibrated the field generator, unaware of the overload building behind him.</p>

<p>‚ÄúElara?‚Äù he said, noticing her sudden presence. ‚ÄúYou look like you‚Äôve seen a ghost.‚Äù</p>

<p>‚ÄúPlease‚Äîturn it off!‚Äù she shouted. ‚ÄúNow!‚Äù</p>

<p>He frowned. ‚ÄúWhat are you‚Äî‚Äù</p>

<p>But before she could reach him, the sixty seconds ended. The Key burned out, and time snapped back, flinging her into the present. The lab was silent again ‚Äî the air thick with the same emptiness she‚Äôd lived with for a year.</p>

<hr>

<p>Elara fell to her knees, clutching the ruined device. Then she noticed something impossible: a new equation scrawled across her workstation. Isaac‚Äôs handwriting. <em>‚ÄúIt‚Äôs not about changing time,‚Äù</em> it read. <em>‚ÄúIt‚Äôs about understanding why it mattered.‚Äù</em></p>

<p>Her tears fell freely as the Key flickered once more ‚Äî just a faint blue heartbeat, as if to say, *I‚Äôm still here.*</p>

<hr>

<p>That night, she didn‚Äôt rebuild the Chrono Key. Instead, she recorded her research for the next generation of scientists, writing not just the formulas but the lesson she‚Äôd learned the hard way ‚Äî that every second, even the ones we lose, shapes who we become.</p>

<p>When she sealed the final log, she smiled faintly. ‚ÄúTime doesn‚Äôt need fixing,‚Äù she said. ‚ÄúIt just needs remembering.‚Äù</p>

<hr>

<p><strong>Meaning / Reflection:</strong><br>
<em>The Chrono Key</em> explores the eternal human wish to undo the past ‚Äî and the quiet wisdom in accepting it instead. It reminds us that regret is not a flaw of time but proof of our love for what once was. Sometimes, healing means closing the door we finally learned to open. ‚è≥</p>


      <p class="end-note">‚Äî End of Story ‚Äî</p>
    </main>

    <nav class="story-navigation">
      <a href="story241.html" class="nav-button prev">‚Üê Previous Story</a>
      <a href="story243.html" class="nav-button next">Next Story ‚Üí</a>
    </nav>
  </article>
<script src="../js/storyFeatures.js"></script>
<style>
    body {
      font-family: 'Noto Nastaliq Urdu', serif;
      margin: 0;
      background: #fff;
    }

    /* Like + Comment Floating Buttons */
    .floating-buttons {
      position: fixed;
      bottom: 22px;
      right: 20px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 12px;
      z-index: 1000;
    }

    .float-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      background: #ffffff;
      color: #111;
      border: 1px solid #ddd;
      border-radius: 50%;
      width: 52px;
      height: 52px;
      font-size: 1.3rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
    }

    .float-btn:hover {
      transform: scale(1.1);
      background: #f5f5f5;
    }

    .float-btn.liked {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      color: white;
      box-shadow: 0 4px 12px rgba(34,197,94,0.4);
    }

    /* Like Count */
    .like-count {
      position: absolute;
      bottom: -18px;
      right: 15px;
      font-size: 0.8rem;
      color: #555;
      font-family: sans-serif;
    }

    /* Comment Popup */
    .comment-popup {
      position: fixed;
      bottom: -100%;
      left: 0;
      width: 100%;
      max-height: 85%;
      background: #fff;
      border-radius: 20px 20px 0 0;
      box-shadow: 0 -6px 20px rgba(0,0,0,0.25);
      padding: 20px;
      z-index: 2000;
      display: flex;
      flex-direction: column;
      transition: bottom 0.4s ease;
    }

    .comment-popup.active {
      bottom: 0;
    }

    .popup-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-family: sans-serif;
      font-weight: 600;
      font-size: 1.1rem;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }

    .close-popup {
      background: none;
      border: none;
      font-size: 1.4rem;
      cursor: pointer;
      color: #666;
    }

    .comments-list {
      flex: 1;
      overflow-y: auto;
      margin-top: 15px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .comment-item {
      background: #f9fafb;
      padding: 10px 14px;
      border-radius: 12px;
      font-family: sans-serif;
      font-size: 0.95rem;
      line-height: 1.4;
      border: 1px solid #eee;
    }

    .comment-item strong {
      display: block;
      margin-bottom: 4px;
      color: #111;
      font-size: 0.95rem;
    }

    .comment-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      border-top: 1px solid #eee;
      padding-top: 10px;
      margin-top: 12px;
    }

    .comment-form input,
    .comment-form textarea {
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 10px;
      font-family: sans-serif;
      font-size: 0.95rem;
      width: 100%;
      resize: none;
      outline: none;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .comment-form input:focus,
    .comment-form textarea:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37,99,235,0.15);
    }

    .comment-form button {
      align-self: flex-start;
      background: linear-gradient(90deg, #2563eb, #1d4ed8);
      color: white;
      border: none;
      border-radius: 40px;
      padding: 8px 22px;
      cursor: pointer;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(37,99,235,0.3);
    }

    .comment-form button:hover {
      transform: scale(1.05);
    }

    .comment-form button.sent {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      box-shadow: 0 4px 10px rgba(34,197,94,0.4);
      cursor: default;
      transform: none;
    }

    /* Scrollbar */
    .comments-list::-webkit-scrollbar {
      width: 6px;
    }
    .comments-list::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 4px;
    }

    /* Responsive */
    @media (max-width: 600px) {
      .float-btn {
        width: 48px;
        height: 48px;
        font-size: 1.2rem;
      }
      .comment-popup {
        padding: 16px;
      }
    }
  </style>
<!-- Floating Like + Comment Buttons -->
  <div class="floating-buttons">
    <div style="position: relative;">
      <button class="float-btn" id="likeBtn">‚ù§Ô∏è</button>
      <span class="like-count" id="likeCount">0</span>
    </div>
    <button class="float-btn" id="commentBtn">üí¨</button>
  </div>

  <!-- Comment Popup -->
  <div class="comment-popup" id="commentPopup">
    <div class="popup-header">
      <span>Comments</span>
      <button class="close-popup" id="closePopup">‚úï</button>
    </div>

    <div class="comments-list" id="commentsList"></div>

    <form class="comment-form" action="https://formspree.io/f/xkgvkele" method="POST" id="commentForm">
      <input type="text" id="name" name="name" placeholder="Your name" required />
      <textarea id="comment" name="comment" placeholder="Write a comment..." required></textarea>
      <button type="submit" id="sendBtn">Send</button>
    </form>
  </div>

<script>
    /* ---------------- LIKE SYSTEM ---------------- */
    const likeBtn = document.getElementById("likeBtn");
    const likeCount = document.getElementById("likeCount");

    const storyKey = location.pathname.split("/").pop();
    const likedKey = `liked_${storyKey}`;
    const countKey = `likeCount_${storyKey}`;

    let liked = localStorage.getItem(likedKey) === "true";
    let count = parseInt(localStorage.getItem(countKey));

    if (isNaN(count)) {
      count = Math.floor(15 + Math.random() * 50);
      localStorage.setItem(countKey, count);
    }

    updateLikeUI();

    likeBtn.addEventListener("click", () => {
      liked = !liked;
      count = liked ? count + 1 : Math.max(0, count - 1);
      localStorage.setItem(likedKey, liked);
      localStorage.setItem(countKey, count);
      updateLikeUI();
    });

    function updateLikeUI() {
      likeBtn.classList.toggle("liked", liked);
      likeCount.textContent = count;
    }

    /* ---------------- COMMENT POPUP ---------------- */
    const commentBtn = document.getElementById("commentBtn");
    const commentPopup = document.getElementById("commentPopup");
    const closePopup = document.getElementById("closePopup");
    const commentsList = document.getElementById("commentsList");
    const commentForm = document.getElementById("commentForm");
    const sendBtn = document.getElementById("sendBtn");

    commentBtn.addEventListener("click", () => {
      commentPopup.classList.add("active");
    });

    closePopup.addEventListener("click", () => {
      commentPopup.classList.remove("active");
    });

    /* Load saved comments */
    const commentsKey = `comments_${storyKey}`;
    let comments = JSON.parse(localStorage.getItem(commentsKey)) || [];
    renderComments();

    function renderComments() {
      commentsList.innerHTML = comments.length
        ? comments.map(c => `<div class="comment-item"><strong>${c.name}</strong>${c.text}</div>`).join("")
        : `<p style="color:#777;font-family:sans-serif;font-size:0.9rem;">No comments yet.</p>`;
    }

    /* Submit comment */
    commentForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const text = document.getElementById("comment").value.trim();
      if (!name || !text) return;

      // Save locally
      comments.push({ name, text });
      localStorage.setItem(commentsKey, JSON.stringify(comments));
      renderComments();

      // Send to Formspree
      const formData = new FormData(commentForm);
      const action = commentForm.getAttribute("action");

      try {
        const res = await fetch(action, { method: "POST", body: formData, headers: { 'Accept': 'application/json' } });
        if (res.ok) {
          sendBtn.textContent = "Sent ‚úÖ";
          sendBtn.classList.add("sent");
          sendBtn.disabled = true;
          commentForm.reset();
          setTimeout(() => {
            sendBtn.textContent = "Send";
            sendBtn.classList.remove("sent");
            sendBtn.disabled = false;
          }, 2000);
        }
      } catch {
        alert("Connection failed. Please try again.");
      }
    });
  </script>
<footer class="site-footer">
  <p>¬© <span id="year"></span> Daily Pixel. All rights reserved.</p>
</footer>

</body>
</html>
