<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Mapmaker‚Äôs Compass</title>
  <link rel="stylesheet" href="../style.css" />
</head>
<body>
  <a class="back-link" href="../index.html">‚Üê Back to Stories</a>
  <article class="story-page">
    <header class="story-header">
      <h1>The Mapmaker‚Äôs Compass</h1>
      <p class="meta">January 6, 2025 ‚Ä¢ By Tristan Vale</p>
      <div class="tags">
        <span class="tag">exploration</span>
        <span class="tag">survival</span>
        <span class="tag">destiny</span>
        <span class="tag">courage</span>
      </div>
      <img class="featured-image" src="https://images.unsplash.com/photo-1623872374222-a4c27335af19?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8QW4lMjBleHBsb3JlciUyMHN0YW5kaW5nJTIwYXRvcCUyMGElMjBjYW55b24lMjByaWRnZSUyQyUyMGhvbGRpbmclMjBhJTIwYnJhc3MlMjBjb21wYXNzJTIwYWdhaW5zdCUyMGElMjBidXJuaW5nJTIwc3Vuc2V0LnxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&q=60&w=500" alt="An explorer standing atop a canyon ridge, holding a brass compass against a burning sunset.">
    </header>

    <main class="story-content">
      <p>The letter arrived on a Tuesday, sealed in red wax and smelling faintly of cedar. It carried no return address‚Äîonly her name: <strong>Elara Finch</strong>. Inside was a single object: her grandfather‚Äôs old brass compass, cracked across the face, its needle frozen between north and east. Beneath it, a note written in his familiar looping script: <em>‚ÄúFind where it points when you stop looking.‚Äù</em></p>

<p>Elara hadn‚Äôt seen him since she was fifteen. The great mapmaker, Alden Finch, had vanished on an expedition to the Carinthian Range fifteen years ago‚Äîdeclared lost to the mountains. And yet here was his compass, in perfect condition, as if it had never left his pocket.</p>

<p>That night, under a lamp‚Äôs soft glow, she studied it again. The needle twitched slightly‚Äîtoward nowhere. And for the first time in years, Elara felt that same restless pull her grandfather had once described: ‚ÄúThe world doesn‚Äôt end on a map, Elara. It only waits to be drawn.‚Äù</p>

<p>By dawn, she‚Äôd packed her rucksack and boarded the first train east.</p>

<hr>

<p>Three weeks later, she stood at the foot of the Carinthian cliffs. Wind roared through the ravines like a living thing. The path was treacherous, choked with ice and mist, but something deep within urged her forward. The compass remained stubbornly erratic‚Äîits needle spinning whenever she hesitated, steadying only when she let go of logic and trusted instinct.</p>

<p>Days turned into weeks. She crossed ridges, slept beneath stars, followed rivers that cut like silver threads through stone. Hunger gnawed, and storms bruised the sky, but still she pressed on. One evening, while sheltering beneath a rocky ledge, she heard the faint whisper of a voice‚Äîhis voice.</p>

<p>‚ÄúYou‚Äôre closer than you think.‚Äù</p>

<p>She stumbled forward into the dark, the compass trembling in her palm. It glowed faintly‚Äîsoft amber light spilling across the rocks. There, hidden behind a curtain of vines, was a narrow passage leading into the mountain. The walls shimmered faintly with markings‚Äîmaps carved directly into stone. Hundreds of them. Rivers, continents, constellations‚Äîall of his life‚Äôs work etched in secret.</p>

<p>And at the center, a single inscription:</p>

<p><em>‚ÄúTo my granddaughter, the next mapmaker. The compass was never meant to show direction‚Äîit was meant to show heart.‚Äù</em></p>

<p>Her breath caught. The compass needle stopped spinning, settling firmly toward her chest.</p>

<p>Elara sank to her knees, tears falling freely. For all her searching‚Äîfor maps, paths, and meaning‚Äîshe realized her grandfather hadn‚Äôt been lost. He had found what every explorer seeks: a truth that cannot be charted.</p>

<p>She spent the night tracing the carvings, adding her own marks beside his. When dawn broke over the mountains, she stepped into the light with her compass‚Äîstill cracked, still beautiful‚Äîand began her descent. This time, she wasn‚Äôt following it. She was guiding it.</p>

<hr>

<p><strong>Meaning / Reflection:</strong><br>
<em>The Mapmaker‚Äôs Compass</em> is a story about trust, legacy, and self-discovery. It reminds us that adventure isn‚Äôt always about where we go‚Äîit‚Äôs about what we find within ourselves when the path disappears. The true map is not drawn on paper, but in the courage to keep walking even when the way forward is unknown. üß≠‚ú®</p>


      <p class="end-note">‚Äî End of Story ‚Äî</p>
    </main>

    <nav class="story-navigation">
      <a href="story208.html" class="nav-button prev">‚Üê Previous Story</a>
      <a href="story210.html" class="nav-button next">Next Story ‚Üí</a>
    </nav>
  </article>
<script src="../js/storyFeatures.js"></script>
<style>
    body {
      font-family: 'Noto Nastaliq Urdu', serif;
      margin: 0;
      background: #fff;
    }

    /* Like + Comment Floating Buttons */
    .floating-buttons {
      position: fixed;
      bottom: 22px;
      right: 20px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 12px;
      z-index: 1000;
    }

    .float-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      background: #ffffff;
      color: #111;
      border: 1px solid #ddd;
      border-radius: 50%;
      width: 52px;
      height: 52px;
      font-size: 1.3rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
    }

    .float-btn:hover {
      transform: scale(1.1);
      background: #f5f5f5;
    }

    .float-btn.liked {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      color: white;
      box-shadow: 0 4px 12px rgba(34,197,94,0.4);
    }

    /* Like Count */
    .like-count {
      position: absolute;
      bottom: -18px;
      right: 15px;
      font-size: 0.8rem;
      color: #555;
      font-family: sans-serif;
    }

    /* Comment Popup */
    .comment-popup {
      position: fixed;
      bottom: -100%;
      left: 0;
      width: 100%;
      max-height: 85%;
      background: #fff;
      border-radius: 20px 20px 0 0;
      box-shadow: 0 -6px 20px rgba(0,0,0,0.25);
      padding: 20px;
      z-index: 2000;
      display: flex;
      flex-direction: column;
      transition: bottom 0.4s ease;
    }

    .comment-popup.active {
      bottom: 0;
    }

    .popup-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-family: sans-serif;
      font-weight: 600;
      font-size: 1.1rem;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }

    .close-popup {
      background: none;
      border: none;
      font-size: 1.4rem;
      cursor: pointer;
      color: #666;
    }

    .comments-list {
      flex: 1;
      overflow-y: auto;
      margin-top: 15px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .comment-item {
      background: #f9fafb;
      padding: 10px 14px;
      border-radius: 12px;
      font-family: sans-serif;
      font-size: 0.95rem;
      line-height: 1.4;
      border: 1px solid #eee;
    }

    .comment-item strong {
      display: block;
      margin-bottom: 4px;
      color: #111;
      font-size: 0.95rem;
    }

    .comment-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      border-top: 1px solid #eee;
      padding-top: 10px;
      margin-top: 12px;
    }

    .comment-form input,
    .comment-form textarea {
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 10px;
      font-family: sans-serif;
      font-size: 0.95rem;
      width: 100%;
      resize: none;
      outline: none;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .comment-form input:focus,
    .comment-form textarea:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37,99,235,0.15);
    }

    .comment-form button {
      align-self: flex-start;
      background: linear-gradient(90deg, #2563eb, #1d4ed8);
      color: white;
      border: none;
      border-radius: 40px;
      padding: 8px 22px;
      cursor: pointer;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(37,99,235,0.3);
    }

    .comment-form button:hover {
      transform: scale(1.05);
    }

    .comment-form button.sent {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      box-shadow: 0 4px 10px rgba(34,197,94,0.4);
      cursor: default;
      transform: none;
    }

    /* Scrollbar */
    .comments-list::-webkit-scrollbar {
      width: 6px;
    }
    .comments-list::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 4px;
    }

    /* Responsive */
    @media (max-width: 600px) {
      .float-btn {
        width: 48px;
        height: 48px;
        font-size: 1.2rem;
      }
      .comment-popup {
        padding: 16px;
      }
    }
  </style>
<!-- Floating Like + Comment Buttons -->
  <div class="floating-buttons">
    <div style="position: relative;">
      <button class="float-btn" id="likeBtn">‚ù§Ô∏è</button>
      <span class="like-count" id="likeCount">0</span>
    </div>
    <button class="float-btn" id="commentBtn">üí¨</button>
  </div>

  <!-- Comment Popup -->
  <div class="comment-popup" id="commentPopup">
    <div class="popup-header">
      <span>Comments</span>
      <button class="close-popup" id="closePopup">‚úï</button>
    </div>

    <div class="comments-list" id="commentsList"></div>

    <form class="comment-form" action="https://formspree.io/f/xkgvkele" method="POST" id="commentForm">
      <input type="text" id="name" name="name" placeholder="Your name" required />
      <textarea id="comment" name="comment" placeholder="Write a comment..." required></textarea>
      <button type="submit" id="sendBtn">Send</button>
    </form>
  </div>

<script>
    /* ---------------- LIKE SYSTEM ---------------- */
    const likeBtn = document.getElementById("likeBtn");
    const likeCount = document.getElementById("likeCount");

    const storyKey = location.pathname.split("/").pop();
    const likedKey = `liked_${storyKey}`;
    const countKey = `likeCount_${storyKey}`;

    let liked = localStorage.getItem(likedKey) === "true";
    let count = parseInt(localStorage.getItem(countKey));

    if (isNaN(count)) {
      count = Math.floor(15 + Math.random() * 50);
      localStorage.setItem(countKey, count);
    }

    updateLikeUI();

    likeBtn.addEventListener("click", () => {
      liked = !liked;
      count = liked ? count + 1 : Math.max(0, count - 1);
      localStorage.setItem(likedKey, liked);
      localStorage.setItem(countKey, count);
      updateLikeUI();
    });

    function updateLikeUI() {
      likeBtn.classList.toggle("liked", liked);
      likeCount.textContent = count;
    }

    /* ---------------- COMMENT POPUP ---------------- */
    const commentBtn = document.getElementById("commentBtn");
    const commentPopup = document.getElementById("commentPopup");
    const closePopup = document.getElementById("closePopup");
    const commentsList = document.getElementById("commentsList");
    const commentForm = document.getElementById("commentForm");
    const sendBtn = document.getElementById("sendBtn");

    commentBtn.addEventListener("click", () => {
      commentPopup.classList.add("active");
    });

    closePopup.addEventListener("click", () => {
      commentPopup.classList.remove("active");
    });

    /* Load saved comments */
    const commentsKey = `comments_${storyKey}`;
    let comments = JSON.parse(localStorage.getItem(commentsKey)) || [];
    renderComments();

    function renderComments() {
      commentsList.innerHTML = comments.length
        ? comments.map(c => `<div class="comment-item"><strong>${c.name}</strong>${c.text}</div>`).join("")
        : `<p style="color:#777;font-family:sans-serif;font-size:0.9rem;">No comments yet.</p>`;
    }

    /* Submit comment */
    commentForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const text = document.getElementById("comment").value.trim();
      if (!name || !text) return;

      // Save locally
      comments.push({ name, text });
      localStorage.setItem(commentsKey, JSON.stringify(comments));
      renderComments();

      // Send to Formspree
      const formData = new FormData(commentForm);
      const action = commentForm.getAttribute("action");

      try {
        const res = await fetch(action, { method: "POST", body: formData, headers: { 'Accept': 'application/json' } });
        if (res.ok) {
          sendBtn.textContent = "Sent ‚úÖ";
          sendBtn.classList.add("sent");
          sendBtn.disabled = true;
          commentForm.reset();
          setTimeout(() => {
            sendBtn.textContent = "Send";
            sendBtn.classList.remove("sent");
            sendBtn.disabled = false;
          }, 2000);
        }
      } catch {
        alert("Connection failed. Please try again.");
      }
    });
  </script>
<footer class="site-footer">
  <p>¬© <span id="year"></span> Daily Pixel. All rights reserved.</p>
</footer>

</body>
</html>
