<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Last Ember of Vareth</title>
  <link rel="stylesheet" href="../style.css" />
</head>
<body>
  <a class="back-link" href="../index.html">← Back to Stories</a>
  <article class="story-page">
    <header class="story-header">
      <h1>The Last Ember of Vareth</h1>
      <p class="meta">January 15, 2025 • By Elara Wynn</p>
      <div class="tags">
        <span class="tag">magic</span>
        <span class="tag">destiny</span>
        <span class="tag">sacrifice</span>
        <span class="tag">prophecy</span>
      </div>
      <img class="featured-image" src="https://media.istockphoto.com/id/871797502/photo/strengthening-the-first-world-war.webp?a=1&b=1&s=612x612&w=0&k=20&c=CAWF4GG0qMKcuUtkRrNSt4QQuMe8LLQ9chKYgwo94eo=" alt="Couple sitting beneath a large willow tree, exchanging letters and smiling softly at each other">
    </header>

    <main class="story-content">
      <p>In the kingdom of Vareth, the light never faded — or so the people believed. For a thousand years, a sacred flame had burned at the heart of the citadel, guarded by generations of mages known as the Keepers of the Ember. It was said that as long as the flame lived, darkness could never enter their realm.</p>

<p>But on the first night of the frost moon in 2025, the flame flickered.</p>

<p>Arin Solen, the youngest apprentice of the Keepers, was the first to see it. He had been sweeping the Hall of Ashes when the light dimmed for a heartbeat — a shiver of shadow passing through the chamber. No one else noticed, but Arin did. He always noticed things others ignored.</p>

<p>He ran to the High Keeper’s chamber, breathless. “Master Lareth! The flame— it faltered.”</p>

<p>The old mage’s eyes, clouded with age, opened slowly. “Then it has begun,” he murmured. “The prophecy of the Dimming.”</p>

<p>Arin frowned. “You mean the old legends? They’re just stories.”</p>

<p>Lareth shook his head. “Stories are only truths that haven’t happened yet.”</p>

<p>By dawn, word spread through the citadel. The flame — once golden and eternal — was now pale and weak, its warmth fading from the city streets. Crops wilted. Frost crept into the air. And at the edges of the kingdom, something stirred in the dark — creatures long forgotten, whispering through the forests beyond the light.</p>

<p>“The Ember’s heart is dying,” Lareth told Arin as they stood before the altar. “Only one pure of will may rekindle it. You were chosen the moment you were born.”</p>

<p>Arin stepped back. “Chosen? I’m no one. My magic barely lights a candle.”</p>

<p>“And yet the flame listens to you,” the old man said, smiling faintly. “You feel its pulse, don’t you?”</p>

<p>He did. Whenever he approached the ember, it flared — as though it recognized him. That night, he dreamed of a voice calling his name from within the fire. A woman’s voice, soft and sorrowful: *“Arin, the light is not dying. It is returning home.”*</p>

<p>He woke in a cold sweat and went to the Hall of Ashes. The flame burned faintly, flickering in the dark. And in its heart, for the first time, he saw a reflection — not of himself, but of her: a figure cloaked in fire, watching him with eyes of gold.</p>

<p>“Who are you?” he whispered.</p>

<p>“I am the Ember,” she said. “Your world was built from my breath. But mortals have caged me too long. The light must be free.”</p>

<p>“If you leave,” Arin said, “the kingdom will fall into darkness.”</p>

<p>“And if I stay,” she replied, “you will never learn to bear the light yourselves.”</p>

<p>He felt the truth burn inside him — that she was not meant to save them forever. The flame had always been a gift, not a promise.</p>

<p>As dawn broke, the High Keeper found Arin kneeling before the dying fire. “I can save it,” Arin said quietly. “But not the way you think.” He raised his hand, and the ember pulsed. Flames danced across his skin, not burning, but weaving through him — threads of living light. He gasped as memories not his own flooded his mind: the first dawn, the first Keepers, centuries of guardianship and sacrifice.</p>

<p>“Arin, stop!” Lareth cried. “You’ll destroy yourself!”</p>

<p>Arin smiled through the tears. “Maybe. But maybe this is what the light wanted all along.”</p>

<p>He stepped into the altar. The flames rose, swallowing him in brilliance. The citadel shook, the walls glowing like molten glass. And when the light faded, Arin was gone.</p>

<p>In his place burned a single ember — small, but steady. Its glow spread slowly through the city, warming the frost, banishing the shadows. The flame of Vareth lived again — not in a chamber, but in every hearth, every candle, every beating heart.</p>

<p>Years later, when travelers entered Vareth, they would speak of a strange light in the mist — a figure of flame walking among the people, smiling quietly, guarding the world he had given everything to save.</p>

<hr>

<p><strong>Meaning / Reflection:</strong><br>
<em>The Last Ember of Vareth</em> is a tale about sacrifice, legacy, and the courage to let go. It reminds us that true light doesn’t live in monuments or magic — it lives in those willing to carry it forward. Sometimes, keeping the flame alive means becoming it. 🔥🌙</p>


      <p class="end-note">— End of Story —</p>
    </main>

    <nav class="story-navigation">
      <a href="story210.html" class="nav-button prev">← Previous Story</a>
      <a href="story212.html" class="nav-button next">Next Story →</a>
    </nav>
  </article>
<script src="../js/storyFeatures.js"></script>
<style>
    body {
      font-family: 'Noto Nastaliq Urdu', serif;
      margin: 0;
      background: #fff;
    }

    /* Like + Comment Floating Buttons */
    .floating-buttons {
      position: fixed;
      bottom: 22px;
      right: 20px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 12px;
      z-index: 1000;
    }

    .float-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      background: #ffffff;
      color: #111;
      border: 1px solid #ddd;
      border-radius: 50%;
      width: 52px;
      height: 52px;
      font-size: 1.3rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
    }

    .float-btn:hover {
      transform: scale(1.1);
      background: #f5f5f5;
    }

    .float-btn.liked {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      color: white;
      box-shadow: 0 4px 12px rgba(34,197,94,0.4);
    }

    /* Like Count */
    .like-count {
      position: absolute;
      bottom: -18px;
      right: 15px;
      font-size: 0.8rem;
      color: #555;
      font-family: sans-serif;
    }

    /* Comment Popup */
    .comment-popup {
      position: fixed;
      bottom: -100%;
      left: 0;
      width: 100%;
      max-height: 85%;
      background: #fff;
      border-radius: 20px 20px 0 0;
      box-shadow: 0 -6px 20px rgba(0,0,0,0.25);
      padding: 20px;
      z-index: 2000;
      display: flex;
      flex-direction: column;
      transition: bottom 0.4s ease;
    }

    .comment-popup.active {
      bottom: 0;
    }

    .popup-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-family: sans-serif;
      font-weight: 600;
      font-size: 1.1rem;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }

    .close-popup {
      background: none;
      border: none;
      font-size: 1.4rem;
      cursor: pointer;
      color: #666;
    }

    .comments-list {
      flex: 1;
      overflow-y: auto;
      margin-top: 15px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .comment-item {
      background: #f9fafb;
      padding: 10px 14px;
      border-radius: 12px;
      font-family: sans-serif;
      font-size: 0.95rem;
      line-height: 1.4;
      border: 1px solid #eee;
    }

    .comment-item strong {
      display: block;
      margin-bottom: 4px;
      color: #111;
      font-size: 0.95rem;
    }

    .comment-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      border-top: 1px solid #eee;
      padding-top: 10px;
      margin-top: 12px;
    }

    .comment-form input,
    .comment-form textarea {
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 10px;
      font-family: sans-serif;
      font-size: 0.95rem;
      width: 100%;
      resize: none;
      outline: none;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .comment-form input:focus,
    .comment-form textarea:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37,99,235,0.15);
    }

    .comment-form button {
      align-self: flex-start;
      background: linear-gradient(90deg, #2563eb, #1d4ed8);
      color: white;
      border: none;
      border-radius: 40px;
      padding: 8px 22px;
      cursor: pointer;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(37,99,235,0.3);
    }

    .comment-form button:hover {
      transform: scale(1.05);
    }

    .comment-form button.sent {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      box-shadow: 0 4px 10px rgba(34,197,94,0.4);
      cursor: default;
      transform: none;
    }

    /* Scrollbar */
    .comments-list::-webkit-scrollbar {
      width: 6px;
    }
    .comments-list::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 4px;
    }

    /* Responsive */
    @media (max-width: 600px) {
      .float-btn {
        width: 48px;
        height: 48px;
        font-size: 1.2rem;
      }
      .comment-popup {
        padding: 16px;
      }
    }
  </style>
<!-- Floating Like + Comment Buttons -->
  <div class="floating-buttons">
    <div style="position: relative;">
      <button class="float-btn" id="likeBtn">❤️</button>
      <span class="like-count" id="likeCount">0</span>
    </div>
    <button class="float-btn" id="commentBtn">💬</button>
  </div>

  <!-- Comment Popup -->
  <div class="comment-popup" id="commentPopup">
    <div class="popup-header">
      <span>Comments</span>
      <button class="close-popup" id="closePopup">✕</button>
    </div>

    <div class="comments-list" id="commentsList"></div>

    <form class="comment-form" action="https://formspree.io/f/xkgvkele" method="POST" id="commentForm">
      <input type="text" id="name" name="name" placeholder="Your name" required />
      <textarea id="comment" name="comment" placeholder="Write a comment..." required></textarea>
      <button type="submit" id="sendBtn">Send</button>
    </form>
  </div>

<script>
    /* ---------------- LIKE SYSTEM ---------------- */
    const likeBtn = document.getElementById("likeBtn");
    const likeCount = document.getElementById("likeCount");

    const storyKey = location.pathname.split("/").pop();
    const likedKey = `liked_${storyKey}`;
    const countKey = `likeCount_${storyKey}`;

    let liked = localStorage.getItem(likedKey) === "true";
    let count = parseInt(localStorage.getItem(countKey));

    if (isNaN(count)) {
      count = Math.floor(15 + Math.random() * 50);
      localStorage.setItem(countKey, count);
    }

    updateLikeUI();

    likeBtn.addEventListener("click", () => {
      liked = !liked;
      count = liked ? count + 1 : Math.max(0, count - 1);
      localStorage.setItem(likedKey, liked);
      localStorage.setItem(countKey, count);
      updateLikeUI();
    });

    function updateLikeUI() {
      likeBtn.classList.toggle("liked", liked);
      likeCount.textContent = count;
    }

    /* ---------------- COMMENT POPUP ---------------- */
    const commentBtn = document.getElementById("commentBtn");
    const commentPopup = document.getElementById("commentPopup");
    const closePopup = document.getElementById("closePopup");
    const commentsList = document.getElementById("commentsList");
    const commentForm = document.getElementById("commentForm");
    const sendBtn = document.getElementById("sendBtn");

    commentBtn.addEventListener("click", () => {
      commentPopup.classList.add("active");
    });

    closePopup.addEventListener("click", () => {
      commentPopup.classList.remove("active");
    });

    /* Load saved comments */
    const commentsKey = `comments_${storyKey}`;
    let comments = JSON.parse(localStorage.getItem(commentsKey)) || [];
    renderComments();

    function renderComments() {
      commentsList.innerHTML = comments.length
        ? comments.map(c => `<div class="comment-item"><strong>${c.name}</strong>${c.text}</div>`).join("")
        : `<p style="color:#777;font-family:sans-serif;font-size:0.9rem;">No comments yet.</p>`;
    }

    /* Submit comment */
    commentForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const text = document.getElementById("comment").value.trim();
      if (!name || !text) return;

      // Save locally
      comments.push({ name, text });
      localStorage.setItem(commentsKey, JSON.stringify(comments));
      renderComments();

      // Send to Formspree
      const formData = new FormData(commentForm);
      const action = commentForm.getAttribute("action");

      try {
        const res = await fetch(action, { method: "POST", body: formData, headers: { 'Accept': 'application/json' } });
        if (res.ok) {
          sendBtn.textContent = "Sent ✅";
          sendBtn.classList.add("sent");
          sendBtn.disabled = true;
          commentForm.reset();
          setTimeout(() => {
            sendBtn.textContent = "Send";
            sendBtn.classList.remove("sent");
            sendBtn.disabled = false;
          }, 2000);
        }
      } catch {
        alert("Connection failed. Please try again.");
      }
    });
  </script>
<footer class="site-footer">
  <p>© <span id="year"></span> Daily Pixel. All rights reserved.</p>
</footer>

</body>
</html>
