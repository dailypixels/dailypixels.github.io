<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Last Song of the Weavers</title>
  <link rel="stylesheet" href="../style.css" />
</head>
<body>
  <a class="back-link" href="../index.html">‚Üê Back to Stories</a>
  <article class="story-page">
    <header class="story-header">
      <h1>The Last Song of the Weavers</h1>
      <p class="meta">May 7, 2025 ‚Ä¢ By Rayan Elwood</p>
      <div class="tags">
        <span class="tag">heritage</span>
        <span class="tag">craftsmanship</span>
        <span class="tag">legacy</span>
      </div>
      <img 
        class="featured-image" 
        src="https://images.unsplash.com/photo-1578242141173-86170c4338bb?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTV8fEFuJTIwYW5jaWVudCUyMGxvb20lMjBpbiUyMGElMjBzdW5saXQlMjByb29tJTIwJUUyJTgwJTk0JTIwdGhyZWFkcyUyMG9mJTIwZ29sZCUyQyUyMHJlZCUyQyUyMGFuZCUyMGJsdWUlMjBzdHJldGNoZWQlMjBsaWtlJTIwdmVpbnMlMjBvZiUyMG1lbW9yeSUyQyUyMHRoZSUyMGxhc3QlMjBsaWdodCUyMG9mJTIwZGF5JTIwd2VhdmluZyUyMGl0c2VsZiUyMHRocm91Z2glMjBzaWxlbmNlLnxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&q=60&w=500" 
        alt="An ancient loom in a sunlit room ‚Äî threads of gold, red, and blue stretched like veins of memory, the last light of day weaving itself through silence.">
    </header>

    <main class="story-content">
      <p> The wind in the mountains always carried stories. If you listened carefully, you could hear them ‚Äî in the rustle of pine trees, in the creak of wooden doors, in the sighs of old looms that hadn‚Äôt moved in years. The village of *Tirval* had once been known for its weavers. Now, only one remained ‚Äî *Asha Devi,* her hands as frail as the threads she worked with. </p> <p> Every dawn, she sat by the window, tying silk and cotton together ‚Äî not to make cloth, but to remember faces. Each color was a memory: blue for her brother who loved the rain, red for the festivals that no longer came, gold for her mother‚Äôs laughter echoing through the house. </p> <p> The young no longer came to learn. They said weaving was too slow for this century, too small a dream for a world of machines. But one winter morning, a stranger appeared ‚Äî a boy named *Ravi*, camera slung around his neck, eyes wide with quiet reverence. ‚ÄúI came to record what‚Äôs left,‚Äù he said. ‚ÄúBefore it disappears.‚Äù Asha looked up from her loom and smiled faintly. ‚ÄúThen you must first learn to listen,‚Äù she replied. </p> <p> For seven days, Ravi stayed. He learned how to dye thread in turmeric and indigo, how to stretch the yarn so it hummed softly like a plucked string. He asked about patterns, symbols, and colors ‚Äî but Asha kept saying, ‚ÄúEvery weave has a song. If you can‚Äôt hear it, you‚Äôre only making cloth.‚Äù </p> <p> On the eighth day, she let him weave alone. He hesitated, hands trembling. ‚ÄúI don‚Äôt hear anything,‚Äù he said quietly. Asha nodded. ‚ÄúThat‚Äôs because you‚Äôre listening for sound. The song lives in the rhythm ‚Äî between your breath and your heartbeat.‚Äù </p> <p> That night, as the snow fell outside, Ravi sat at the loom long after she‚Äôd gone to sleep. He closed his eyes and let his fingers move ‚Äî no plan, no design, just motion and memory. When he finished, the pattern was uneven but alive. The colors clashed yet somehow belonged together ‚Äî like two voices learning to harmonize. He realized the song had been there all along. </p> <p> The next morning, the old woman was gone. Her chair sat empty, the window open to the dawn. On the loom, she‚Äôd left one final piece ‚Äî a shawl of white and gold, threads interwoven with a pattern Ravi had never seen before. At the edge, embroidered in faint letters, were the words: <em>‚ÄúWe do not weave to remember. We weave so the world will.‚Äù</em> </p> <p> Years later, when Ravi‚Äôs photographs of *The Last Weaver of Tirval* spread across museums and journals, he returned to that same village. This time, the looms were alive again ‚Äî children laughing, elders teaching, colors singing once more. And in every rhythm of thread against wood, he could still hear her voice ‚Äî steady, eternal, and full of light. </p>
<p> <strong>Meaning / Reflection:</strong><br> *The Last Song of the Weavers* reminds us that culture isn‚Äôt just preserved in museums ‚Äî it lives in our hands, in the patience of creation, in the act of passing beauty forward. Every tradition, no matter how small, carries the pulse of those who came before. And when we choose to continue it ‚Äî even once ‚Äî we keep their voices alive. ü™°‚ú® </p>
      <p class="end-note">‚Äî End of Story ‚Äî</p>
    </main>

    <nav class="story-navigation">
      <a href="story51.html" class="nav-button prev">‚Üê Previous Story</a>
      <a href="story53.html" class="nav-button next">Next Story ‚Üí</a>
    </nav>
  </article>
<script src="../js/storyFeatures.js"></script>
<style>
    body {
      font-family: 'Noto Nastaliq Urdu', serif;
      margin: 0;
      background: #fff;
    }

    /* Like + Comment Floating Buttons */
    .floating-buttons {
      position: fixed;
      bottom: 22px;
      right: 20px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 12px;
      z-index: 1000;
    }

    .float-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      background: #ffffff;
      color: #111;
      border: 1px solid #ddd;
      border-radius: 50%;
      width: 52px;
      height: 52px;
      font-size: 1.3rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
    }

    .float-btn:hover {
      transform: scale(1.1);
      background: #f5f5f5;
    }

    .float-btn.liked {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      color: white;
      box-shadow: 0 4px 12px rgba(34,197,94,0.4);
    }

    /* Like Count */
    .like-count {
      position: absolute;
      bottom: -18px;
      right: 15px;
      font-size: 0.8rem;
      color: #555;
      font-family: sans-serif;
    }

    /* Comment Popup */
    .comment-popup {
      position: fixed;
      bottom: -100%;
      left: 0;
      width: 100%;
      max-height: 85%;
      background: #fff;
      border-radius: 20px 20px 0 0;
      box-shadow: 0 -6px 20px rgba(0,0,0,0.25);
      padding: 20px;
      z-index: 2000;
      display: flex;
      flex-direction: column;
      transition: bottom 0.4s ease;
    }

    .comment-popup.active {
      bottom: 0;
    }

    .popup-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-family: sans-serif;
      font-weight: 600;
      font-size: 1.1rem;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }

    .close-popup {
      background: none;
      border: none;
      font-size: 1.4rem;
      cursor: pointer;
      color: #666;
    }

    .comments-list {
      flex: 1;
      overflow-y: auto;
      margin-top: 15px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .comment-item {
      background: #f9fafb;
      padding: 10px 14px;
      border-radius: 12px;
      font-family: sans-serif;
      font-size: 0.95rem;
      line-height: 1.4;
      border: 1px solid #eee;
    }

    .comment-item strong {
      display: block;
      margin-bottom: 4px;
      color: #111;
      font-size: 0.95rem;
    }

    .comment-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      border-top: 1px solid #eee;
      padding-top: 10px;
      margin-top: 12px;
    }

    .comment-form input,
    .comment-form textarea {
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 10px;
      font-family: sans-serif;
      font-size: 0.95rem;
      width: 100%;
      resize: none;
      outline: none;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .comment-form input:focus,
    .comment-form textarea:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37,99,235,0.15);
    }

    .comment-form button {
      align-self: flex-start;
      background: linear-gradient(90deg, #2563eb, #1d4ed8);
      color: white;
      border: none;
      border-radius: 40px;
      padding: 8px 22px;
      cursor: pointer;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(37,99,235,0.3);
    }

    .comment-form button:hover {
      transform: scale(1.05);
    }

    .comment-form button.sent {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      box-shadow: 0 4px 10px rgba(34,197,94,0.4);
      cursor: default;
      transform: none;
    }

    /* Scrollbar */
    .comments-list::-webkit-scrollbar {
      width: 6px;
    }
    .comments-list::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 4px;
    }

    /* Responsive */
    @media (max-width: 600px) {
      .float-btn {
        width: 48px;
        height: 48px;
        font-size: 1.2rem;
      }
      .comment-popup {
        padding: 16px;
      }
    }
  </style>
<!-- Floating Like + Comment Buttons -->
  <div class="floating-buttons">
    <div style="position: relative;">
      <button class="float-btn" id="likeBtn">‚ù§Ô∏è</button>
      <span class="like-count" id="likeCount">0</span>
    </div>
    <button class="float-btn" id="commentBtn">üí¨</button>
  </div>

  <!-- Comment Popup -->
  <div class="comment-popup" id="commentPopup">
    <div class="popup-header">
      <span>Comments</span>
      <button class="close-popup" id="closePopup">‚úï</button>
    </div>

    <div class="comments-list" id="commentsList"></div>

    <form class="comment-form" action="https://formspree.io/f/xkgvkele" method="POST" id="commentForm">
      <input type="text" id="name" name="name" placeholder="Your name" required />
      <textarea id="comment" name="comment" placeholder="Write a comment..." required></textarea>
      <button type="submit" id="sendBtn">Send</button>
    </form>
  </div>

<script>
    /* ---------------- LIKE SYSTEM ---------------- */
    const likeBtn = document.getElementById("likeBtn");
    const likeCount = document.getElementById("likeCount");

    const storyKey = location.pathname.split("/").pop();
    const likedKey = `liked_${storyKey}`;
    const countKey = `likeCount_${storyKey}`;

    let liked = localStorage.getItem(likedKey) === "true";
    let count = parseInt(localStorage.getItem(countKey));

    if (isNaN(count)) {
      count = Math.floor(15 + Math.random() * 50);
      localStorage.setItem(countKey, count);
    }

    updateLikeUI();

    likeBtn.addEventListener("click", () => {
      liked = !liked;
      count = liked ? count + 1 : Math.max(0, count - 1);
      localStorage.setItem(likedKey, liked);
      localStorage.setItem(countKey, count);
      updateLikeUI();
    });

    function updateLikeUI() {
      likeBtn.classList.toggle("liked", liked);
      likeCount.textContent = count;
    }

    /* ---------------- COMMENT POPUP ---------------- */
    const commentBtn = document.getElementById("commentBtn");
    const commentPopup = document.getElementById("commentPopup");
    const closePopup = document.getElementById("closePopup");
    const commentsList = document.getElementById("commentsList");
    const commentForm = document.getElementById("commentForm");
    const sendBtn = document.getElementById("sendBtn");

    commentBtn.addEventListener("click", () => {
      commentPopup.classList.add("active");
    });

    closePopup.addEventListener("click", () => {
      commentPopup.classList.remove("active");
    });

    /* Load saved comments */
    const commentsKey = `comments_${storyKey}`;
    let comments = JSON.parse(localStorage.getItem(commentsKey)) || [];
    renderComments();

    function renderComments() {
      commentsList.innerHTML = comments.length
        ? comments.map(c => `<div class="comment-item"><strong>${c.name}</strong>${c.text}</div>`).join("")
        : `<p style="color:#777;font-family:sans-serif;font-size:0.9rem;">No comments yet.</p>`;
    }

    /* Submit comment */
    commentForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const text = document.getElementById("comment").value.trim();
      if (!name || !text) return;

      // Save locally
      comments.push({ name, text });
      localStorage.setItem(commentsKey, JSON.stringify(comments));
      renderComments();

      // Send to Formspree
      const formData = new FormData(commentForm);
      const action = commentForm.getAttribute("action");

      try {
        const res = await fetch(action, { method: "POST", body: formData, headers: { 'Accept': 'application/json' } });
        if (res.ok) {
          sendBtn.textContent = "Sent ‚úÖ";
          sendBtn.classList.add("sent");
          sendBtn.disabled = true;
          commentForm.reset();
          setTimeout(() => {
            sendBtn.textContent = "Send";
            sendBtn.classList.remove("sent");
            sendBtn.disabled = false;
          }, 2000);
        }
      } catch {
        alert("Connection failed. Please try again.");
      }
    });
  </script>
<footer class="site-footer">
  <p>¬© <span id="year"></span> Daily Pixel. All rights reserved.</p>
</footer>

</body>
</html>
